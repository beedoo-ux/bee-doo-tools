<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>bee-doo DISPATCH</title>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
body { background: #0F1118; font-family: 'IBM Plex Sans', system-ui, sans-serif; color: #E4E5EB; -webkit-font-smoothing: antialiased; overflow: hidden; height: 100vh; }
#root { height: 100vh; display: flex; flex-direction: column; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }
@keyframes blink-red { 0%,100%{opacity:1;box-shadow:0 0 16px rgba(248,113,113,0.8)} 50%{opacity:0.4;box-shadow:0 0 4px rgba(248,113,113,0.2)} }
@keyframes pulse-green { 0%,100%{box-shadow:0 0 8px rgba(45,212,191,0.6),0 0 20px rgba(45,212,191,0.3)} 50%{box-shadow:0 0 3px rgba(45,212,191,0.2),0 0 6px rgba(45,212,191,0.1)} }
@keyframes pulse-red { 0%,100%{box-shadow:0 0 10px rgba(248,113,113,0.7),0 0 24px rgba(248,113,113,0.3);border-color:rgba(248,113,113,0.8)} 50%{box-shadow:0 0 3px rgba(248,113,113,0.2);border-color:rgba(248,113,113,0.3)} }
@keyframes pulse-red-badge { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:0.6;transform:scale(0.97)} }
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: #14171F; }
::-webkit-scrollbar-thumb { background: #232738; border-radius: 3px; }
button { font-family: 'IBM Plex Sans', system-ui, sans-serif; }
</style>
</head>
<body>
<div id="root"></div>
<script>
window.require = function(mod) {
  if (mod === 'react') return window.React;
  if (mod === 'react-dom') return window.ReactDOM;
  throw new Error('Unknown module: ' + mod);
};
</script>
<script>
var BeeDooDispatch=(()=>{var Se=Object.defineProperty;var Me=Object.getOwnPropertyDescriptor;var Oe=Object.getOwnPropertyNames;var Ne=Object.prototype.hasOwnProperty;var Fe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(n,o)=>(typeof require<"u"?require:n)[o]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var He=(e,n)=>{for(var o in n)Se(e,o,{get:n[o],enumerable:!0})},Ke=(e,n,o,b)=>{if(n&&typeof n=="object"||typeof n=="function")for(let f of Oe(n))!Ne.call(e,f)&&f!==o&&Se(e,f,{get:()=>n[f],enumerable:!(b=Me(n,f))||b.enumerable});return e};var Ue=e=>Ke(Se({},"__esModule",{value:!0}),e);var ct={};He(ct,{default:()=>Re});var w=Fe("react"),E="#FDE154",ae="#0B0D12",Ve="#0F1118",te="#14171F",V="#1A1D28",u="#232738",G="#E4E5EB",$="#6E7490",y="#3A3F55",L="#34D399",h="#FBBF24",N="#F87171",ee="#60A5FA",j="#A78BFA",T="#2DD4BF",De="#F472B6",de=h,re=ee,Ge=T,A="#FF8C42",X={pv_komplett:{label:"PV Komplett",icon:"\u2600\uFE0F",color:E,twoDay:!0,dcTag:"Dach + DC",acTag:"AC + IBN",dcSkill:"pv_dach",acSkill:"pv_elek",dcDur:7,acDur:6},pv_dach:{label:"PV Dach (nur)",icon:"\u{1F3E0}",color:h,twoDay:!1,dcTag:"Dachmontage",acTag:null,dcSkill:"pv_dach",acSkill:null,dcDur:7,acDur:0},pv_elek:{label:"PV Elektro",icon:"\u26A1",color:ee,twoDay:!1,dcTag:null,acTag:"AC + IBN",dcSkill:null,acSkill:"pv_elek",dcDur:0,acDur:6},wp_komplett:{label:"W\xE4rmepumpe",icon:"\u{1F321}\uFE0F",color:j,twoDay:!0,dcTag:"Installation",acTag:"IBN + HZ",dcSkill:"wp",acSkill:"wp",dcDur:8,acDur:5},speicher:{label:"Speicher",icon:"\u{1F50B}",color:L,twoDay:!1,dcTag:"Speicher",acTag:null,dcSkill:"speicher",acSkill:null,dcDur:3,acDur:0},wallbox:{label:"Wallbox",icon:"\u{1F697}",color:T,twoDay:!1,dcTag:"Wallbox",acTag:null,dcSkill:"pv_elek",acSkill:null,dcDur:2,acDur:0}},ie=[{id:1,name:"Klaus Maier",ini:"KM",skills:["pv_dach"],region:"Bielefeld",cap:1,phone:"+49 171 1234001",color:h},{id:2,name:"Peter Schmidt",ini:"PS",skills:["wp"],region:"OWL",cap:1,phone:"+49 171 1234002",color:j},{id:3,name:"Thomas Weber",ini:"TW",skills:["pv_dach","wp"],region:"G\xFCtersloh",cap:1,phone:"+49 171 1234003",color:E},{id:4,name:"Andreas M\xFCller",ini:"AM",skills:["pv_elek","wallbox"],region:"Paderborn",cap:1,phone:"+49 171 1234004",color:ee},{id:5,name:"Stefan Koch",ini:"SK",skills:["pv_dach","pv_elek"],region:"Herford",cap:2,phone:"+49 171 1234005",color:L},{id:6,name:"Michael Bauer",ini:"MB",skills:["wp"],region:"Minden",cap:1,phone:"+49 171 1234006",color:De},{id:7,name:"J\xF6rg Fischer",ini:"JF",skills:["pv_dach"],region:"Detmold",cap:1,phone:"+49 171 1234007",color:h},{id:8,name:"Ralf Zimmermann",ini:"RZ",skills:["pv_elek","speicher"],region:"Bielefeld",cap:1,phone:"+49 171 1234008",color:ee},{id:9,name:"Frank Schulz",ini:"FS",skills:["pv_dach","pv_elek"],region:"G\xFCtersloh",cap:1,phone:"+49 171 1234009",color:h},{id:10,name:"Uwe Braun",ini:"UB",skills:["wp","speicher"],region:"Herford",cap:1,phone:"+49 171 1234010",color:j},{id:11,name:"Markus Krause",ini:"MK",skills:["pv_dach","pv_elek"],region:"Bielefeld",cap:1,phone:"+49 171 1234011",color:T},{id:12,name:"Dirk Hoffmann",ini:"DH",skills:["pv_elek","speicher","wallbox"],region:"Paderborn",cap:1,phone:"+49 171 1234012",color:T},{id:13,name:"SU: Dachtechnik West",ini:"DW",skills:["pv_dach"],region:"OWL",cap:3,phone:"+49 521 9876001",color:h,sub:!0},{id:14,name:"SU: WP Service OWL",ini:"WO",skills:["wp","speicher"],region:"OWL",cap:3,phone:"+49 521 9876002",color:j,sub:!0},{id:15,name:"SU: Elektro Nord",ini:"EN",skills:["pv_elek","wallbox"],region:"Bielefeld",cap:3,phone:"+49 521 9876003",color:ee,sub:!0},{id:16,name:"SU: Allround Pro",ini:"AP",skills:["pv_dach","pv_elek"],region:"Paderborn",cap:2,phone:"+49 521 9876004",color:L,sub:!0},{id:17,name:"Lars Neumann",ini:"LN",skills:["pv_dach","pv_elek"],region:"Minden",cap:1,phone:"+49 171 1234017",color:h},{id:18,name:"Dennis Wolf",ini:"DW2",skills:["wp","wallbox"],region:"Detmold",cap:1,phone:"+49 171 1234018",color:De}],pe=[{id:101,name:"Sandra Vogel",ini:"SV",region:"Bielefeld",cap:2,phone:"+49 160 5550101",color:T},{id:102,name:"Marco Heinz",ini:"MH",region:"G\xFCtersloh",cap:2,phone:"+49 160 5550102",color:De},{id:103,name:"Julia Kramer",ini:"JK",region:"OWL",cap:2,phone:"+49 160 5550103",color:j},{id:104,name:"Tobias Lange",ini:"TL",region:"Paderborn",cap:2,phone:"+49 160 5550104",color:ee},{id:105,name:"Sina Roth",ini:"SR",region:"Herford",cap:2,phone:"+49 160 5550105",color:L},{id:106,name:"Ben Schreiber",ini:"BS",region:"Minden",cap:2,phone:"+49 160 5550106",color:h}],Je=[["Axel Reinhardt","Hauptstr. 12","33602","Bielefeld","pv_komplett"],["Carmen B\xF6hm","Berliner Str. 45","33604","Bielefeld","pv_komplett"],["Werner Sch\xE4fer","Bahnhofstr. 8","33330","G\xFCtersloh","wp_komplett"],["Brigitte Klein","Kirchweg 22","33098","Paderborn","pv_komplett"],["Horst Richter","Feldstr. 7","32049","Herford","pv_komplett"],["Elke Vogel","Gartenstr. 15","32423","Minden","wallbox"],["Bernd Hartmann","Lindenallee 3","32756","Detmold","pv_komplett"],["Monika Braun","Am Park 11","33602","Bielefeld","speicher"],["G\xFCnter Lehmann","Waldweg 19","33334","G\xFCtersloh","pv_komplett"],["Sabine K\xF6hler","M\xFChlenstr. 6","33102","Paderborn","wp_komplett"],["Rainer Schwarz","Bergstr. 28","32052","Herford","pv_komplett"],["Petra Engel","Parkstr. 4","32427","Minden","pv_komplett"],["Hans-Georg Pfeiffer","Schillerstr. 9","33607","Bielefeld","wp_komplett"],["Ursula Fuchs","Goethestr. 17","33334","G\xFCtersloh","speicher"],["Karl-Heinz Mayer","Mozartstr. 3","33100","Paderborn","pv_komplett"],["Rosemarie Brandt","Rosengasse 5","32049","Herford","pv_dach"],["Wolfgang Schneider","Kaiserstr. 22","32423","Minden","pv_komplett"],["Inge Steinmetz","Fichtenweg 8","32756","Detmold","wp_komplett"],["Manfred Kruse","Eichenallee 14","33609","Bielefeld","pv_komplett"],["Hildegard Tietze","Birkenstr. 31","33330","G\xFCtersloh","wallbox"]],Te=["Ziegeldach 38\xB0","Blechdach 15\xB0","Flachdach EPDM","Biberschwanz 42\xB0","Schieferdach 35\xB0"],Ce=["high","high","medium","medium","medium","low"],Ye=()=>Je.map((e,n)=>({id:`P-2026-${String(n+1).padStart(3,"0")}`,type:e[4],customer:e[0],address:e[1],plz:e[2],city:e[3],priority:Ce[n%Ce.length],notes:e[4]==="pv_komplett"||e[4]==="pv_dach"?Te[n%Te.length]:"",contact:`0521 ${9e5+n*7}`,created:new Date(Date.now()-n*1728e5).toISOString().split("T")[0],dcDate:null,dcTechId:null,dcExtraDates:[],acDate:null,acTechId:null,acExtraDates:[],engelId:null,status:"unplanned",baustelleStatus:null,baustelleStartedAt:null,baustelleStartedBy:null,fotoCount:0,letzteAktualisierung:null})),Xe={"2026-02-23":{temp:8,rain:15,icon:"\u26C5",warn:!1,desc:"Leicht bew\xF6lkt"},"2026-02-24":{temp:5,rain:82,icon:"\u{1F327}\uFE0F",warn:!0,desc:"Starkregen"},"2026-02-25":{temp:6,rain:65,icon:"\u{1F326}\uFE0F",warn:!0,desc:"Schauer"},"2026-02-26":{temp:11,rain:12,icon:"\u{1F324}\uFE0F",warn:!1,desc:"Aufheiternd"},"2026-02-27":{temp:14,rain:5,icon:"\u2600\uFE0F",warn:!1,desc:"Sonnig"},"2026-02-28":{temp:9,rain:40,icon:"\u{1F325}\uFE0F",warn:!1,desc:"Bedeckt"},"2026-03-02":{temp:7,rain:20,icon:"\u{1F324}\uFE0F",warn:!1,desc:"Aufgelockert"},"2026-03-03":{temp:6,rain:70,icon:"\u{1F327}\uFE0F",warn:!0,desc:"Regen"},"2026-03-04":{temp:10,rain:8,icon:"\u2600\uFE0F",warn:!1,desc:"Sonnig"},"2026-03-05":{temp:12,rain:5,icon:"\u2600\uFE0F",warn:!1,desc:"Sehr sonnig"},"2026-03-06":{temp:9,rain:35,icon:"\u{1F325}\uFE0F",warn:!1,desc:"Wechselhaft"},"2026-03-09":{temp:7,rain:55,icon:"\u{1F326}\uFE0F",warn:!1,desc:"Leichter Regen"},"2026-03-10":{temp:8,rain:75,icon:"\u{1F327}\uFE0F",warn:!0,desc:"Regen"},"2026-03-11":{temp:11,rain:10,icon:"\u2600\uFE0F",warn:!1,desc:"Sonnig"},"2026-03-12":{temp:13,rain:5,icon:"\u2600\uFE0F",warn:!1,desc:"Klar"},"2026-03-13":{temp:10,rain:25,icon:"\u26C5",warn:!1,desc:"Bew\xF6lkt"}},Z=e=>Xe[e]||{temp:8,rain:25,icon:"\u{1F325}\uFE0F",warn:!1,desc:"Wechselhaft"},q=e=>e instanceof Date?e.toISOString().split("T")[0]:e,M=e=>(typeof e=="string"?new Date(e+"T12:00:00"):e).toLocaleDateString("de-DE",{weekday:"short",day:"2-digit",month:"2-digit"}),Ze=e=>(typeof e=="string"?new Date(e+"T12:00:00"):e).toLocaleDateString("de-DE",{weekday:"long",day:"2-digit",month:"long"}),Qe=e=>{let n=new Date(e.getFullYear(),0,4);return Math.ceil(((e-n)/864e5+n.getDay()+1)/7)},we=e=>{let n=new Date(e+"T12:00:00");return n.setDate(n.getDate()+1),n.getDay()===6&&n.setDate(n.getDate()+2),n.getDay()===0&&n.setDate(n.getDate()+1),q(n)},qe=e=>{let n=new Date(e),o=n.getDay(),b=n.getDate()-o+(o===0?-6:1),f=new Date(n.setDate(b));return Array.from({length:5},(v,g)=>{let a=new Date(f);return a.setDate(f.getDate()+g),a})},je=(e,n)=>{let o=[],b=new Date(e,n,1);for(;b.getMonth()===n;){let f=b.getDay();f!==0&&f!==6&&o.push(q(new Date(b))),b.setDate(b.getDate()+1)}return o};function Re(){let[e,n]=(0,w.useState)(new Date("2026-02-23")),[o,b]=(0,w.useState)(()=>{let t=Ye(),i=[{id:"P-2026-001",dcDate:"2026-02-23",dcTechId:1,acDate:"2026-02-24",acTechId:4,engelId:101,status:"fully_planned",baustelleStatus:"gestartet",baustelleStartedAt:"2026-02-23T07:45:00",baustelleStartedBy:1,fotoCount:4,letzteAktualisierung:"2026-02-23T09:12:00"},{id:"P-2026-002",dcDate:"2026-02-23",dcTechId:5,acDate:"2026-02-24",acTechId:8,engelId:102,status:"fully_planned",baustelleStatus:"engel_vor_ort",baustelleStartedAt:"2026-02-23T08:10:00",baustelleStartedBy:5,fotoCount:2,letzteAktualisierung:"2026-02-23T08:55:00"},{id:"P-2026-003",dcDate:"2026-02-23",dcTechId:2,acDate:"2026-02-24",acTechId:10,engelId:null,status:"dc_planned",baustelleStatus:"engel_fehlt",baustelleStartedAt:"2026-02-23T07:55:00",baustelleStartedBy:2,fotoCount:1,letzteAktualisierung:"2026-02-23T08:02:00"},{id:"P-2026-004",dcDate:"2026-02-25",dcTechId:3,acDate:"2026-02-26",acTechId:11,engelId:104,status:"fully_planned",baustelleStatus:null,baustelleStartedAt:null,baustelleStartedBy:null,fotoCount:0,letzteAktualisierung:null},{id:"P-2026-005",dcDate:"2026-02-26",dcTechId:7,acDate:"2026-02-27",acTechId:9,engelId:101,status:"fully_planned",baustelleStatus:null,baustelleStartedAt:null,baustelleStartedBy:null,fotoCount:0,letzteAktualisierung:null},{id:"P-2026-006",dcDate:"2026-02-23",dcTechId:13,acDate:"2026-02-25",acTechId:15,engelId:102,status:"fully_planned",baustelleStatus:"monteur_spaet",baustelleStartedAt:null,baustelleStartedBy:null,fotoCount:0,letzteAktualisierung:null}];return t.map(l=>{let d=i.find(s=>s.id===l.id);return d?{...l,...d}:l})}),[f,v]=(0,w.useState)("week"),[g,a]=(0,w.useState)(null),[D,c]=(0,w.useState)([]),[m,_]=(0,w.useState)(!1),[C,p]=(0,w.useState)("all"),[r,B]=(0,w.useState)(!1),[x,S]=(0,w.useState)(null),[W,I]=(0,w.useState)(!1),[J,R]=(0,w.useState)(null),[k,H]=(0,w.useState)({year:2026,month:1}),z=(0,w.useMemo)(()=>qe(e),[e]),K=(0,w.useMemo)(()=>{let t={},i=(l,d)=>{t[l]=[...t[l]||[],d]};return o.forEach(l=>{l.dcTechId&&l.dcDate&&i(`${l.dcTechId}_${l.dcDate}`,{proj:l,phase:"dc"}),(l.dcExtraDates||[]).forEach(d=>i(`${l.dcTechId}_${d}`,{proj:l,phase:"dc_ext"})),l.acTechId&&l.acDate&&i(`${l.acTechId}_${l.acDate}`,{proj:l,phase:"ac"}),(l.acExtraDates||[]).forEach(d=>i(`${l.acTechId}_${d}`,{proj:l,phase:"ac_ext"}))}),t},[o]),F=(0,w.useMemo)(()=>{let t={};return o.forEach(i=>{if(!i.engelId)return;let l=i.dcDate;if(!l)return;let d=`${i.engelId}_${l}`;t[d]=[...t[d]||[],i]}),t},[o]),P=(t,i="info")=>c(l=>[{id:Date.now()+Math.random(),msg:t,type:i,time:new Date().toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})},...l.slice(0,99)]),ne=(0,w.useCallback)((t,i)=>{b(l=>l.map(d=>{if(d.id!==t)return d;let s={...d,...i};if(!X[s.type].twoDay)s.status=(s.dcDate||s.acDate)&&(s.dcTechId||s.acTechId)&&s.engelId?"fully_planned":(s.dcDate||s.acDate)&&(s.dcTechId||s.acTechId)?"dc_planned":"unplanned";else{let Q=s.dcDate&&s.dcTechId,O=s.acDate&&s.acTechId,Y=!!s.engelId;s.status=Q&&O&&Y?"fully_planned":Q?"dc_planned":"unplanned"}return s}))},[]),ge=(0,w.useCallback)((t,i)=>{let l=X[t.type];if(i.dcTechId&&i.dcDate){let d=ie.find(s=>s.id===i.dcTechId);P(`\u{1F4CB} ${t.id} DC \u2192 ${d?.name}, ${M(i.dcDate)}`,"assign"),P(`\u{1F4F1} SMS ${d?.name}: ${l.dcTag} | ${t.customer} | ${M(i.dcDate)}`,"sms")}if(i.acTechId&&i.acDate){let d=ie.find(s=>s.id===i.acTechId);P(`\u{1F4CB} ${t.id} AC \u2192 ${d?.name}, ${M(i.acDate)}`,"assign"),P(`\u{1F4F1} SMS ${d?.name}: ${l.acTag} | ${t.customer} | ${M(i.acDate)}`,"sms")}if(i.engelId){let d=pe.find(U=>U.id===i.engelId),s=i.dcDate||t.dcDate;P(`\u{1F54A}\uFE0F Bauengel ${d?.name} \u2192 ${t.customer}, ab ${M(s)} (Starttag)`,"engel"),s&&P(`\u{1F4F1} SMS ${d?.name}: Bauengel ab ${M(s)} bei ${t.customer}, ${t.address} \u2013 bis Abnahme vor Ort bleiben`,"sms")}if(i.dcDate&&(t.type==="pv_komplett"||t.type==="pv_dach")){let d=Z(i.dcDate);d.warn&&P(`\u{1F327}\uFE0F WETTER-WARNUNG ${M(i.dcDate)}: ${d.rain}% Regen \u2013 Dachmontage ${t.id}!`,"warn")}},[]),ue=(0,w.useCallback)((t,i,l)=>{let d=o.find(Y=>Y.id===t);if(!d)return;let s=i==="dc"?"dcExtraDates":"acExtraDates",U=d[s]||[];if(U.includes(l))return;ne(t,{[s]:[...U,l]});let Q=i==="dc"?"DC":"AC",O=i==="dc"?ie.find(Y=>Y.id===d.dcTechId):ie.find(Y=>Y.id===d.acTechId);P(`\u{1F4C5} ${d.id} ${Q} verl\xE4ngert +${M(l)}`,"warn"),P(`\u{1F4F1} SMS ${O?.name}: Verl\xE4ngerung ${Q} bei ${d.customer} am ${M(l)}`,"sms"),P(`\u2709\uFE0F Nachricht an ${d.customer}: ${Q}-Tag verl\xE4ngert auf ${M(l)}`,"mail")},[o,ne]),oe=(0,w.useCallback)((t,i,l)=>{let d=o.find(U=>U.id===t);if(!d)return;let s=i==="dc"?"dcExtraDates":"acExtraDates";ne(t,{[s]:(d[s]||[]).filter(U=>U!==l)}),P(`\u21A9\uFE0F ${d.id} ${i.toUpperCase()} Verl\xE4ngerung ${M(l)} entfernt`,"info")},[o,ne]),me=(0,w.useMemo)(()=>{let t=[];z.forEach(s=>{let U=q(s),Q=Z(U);if(Q.warn){let O=o.filter(Y=>(Y.type==="pv_komplett"||Y.type==="pv_dach")&&(Y.dcDate===U||(Y.dcExtraDates||[]).includes(U))&&Y.dcTechId);O.length>0&&t.push({type:"weather",msg:`${Q.icon} ${M(s)}: ${Q.rain}% Regen \u2013 ${O.length} Dachmontage(n)`})}});let i=o.filter(s=>s.status==="unplanned").length,l=o.filter(s=>s.status==="dc_planned").length,d=o.filter(s=>(s.dcExtraDates||[]).length+(s.acExtraDates||[]).length>0).length,ef=o.filter(s=>s.baustelleStatus==="engel_fehlt").length,ms=o.filter(s=>s.baustelleStatus==="monteur_spaet").length;return ef>0&&t.push({type:"engel_alert",msg:`\uD83D\uDEA8 ${ef} Baustelle(n) OHNE Bauengel!`}),ms>0&&t.push({type:"monteur_alert",msg:`\uD83D\uDEA8 ${ms} Monteur(e) VERSP\u00C4TET!`}),i>5&&t.push({type:"capacity",msg:`\u26A1 ${i} Projekte ungeplant`}),l>0&&t.push({type:"partial",msg:`\u26A0\uFE0F ${l} ohne AC/Bauengel`}),d>0&&t.push({type:"ext",msg:`\u{1F504} ${d} Projekt(e) mit Verl\xE4ngerung`}),t},[z,o]),le=(0,w.useMemo)(()=>ie.filter(t=>!(C==="own"&&t.sub||C==="sub"&&!t.sub)),[C]),se=(0,w.useMemo)(()=>o.filter(t=>t.status==="unplanned"),[o]),ve=(0,w.useMemo)(()=>o.filter(t=>t.status==="dc_planned"),[o]),$e=(0,w.useMemo)(()=>o.filter(t=>(t.dcExtraDates||[]).length+(t.acExtraDates||[]).length>0),[o]),fe=(0,w.useMemo)(()=>{let t=z.map(d=>q(d)),i=d=>t.includes(d.dcDate)||t.includes(d.acDate)||(d.dcExtraDates||[]).some(s=>t.includes(s))||(d.acExtraDates||[]).some(s=>t.includes(s)),l=o.filter(i);return{dc:l.filter(d=>d.dcDate&&t.includes(d.dcDate)).length,ac:l.filter(d=>d.acDate&&t.includes(d.acDate)).length,ext:o.filter(d=>(d.dcExtraDates||[]).some(s=>t.includes(s))||(d.acExtraDates||[]).some(s=>t.includes(s))).length,engel:l.filter(d=>d.engelId&&t.includes(d.acDate||d.dcDate)).length}},[z,o]),Le=async(t,i,l)=>{let d=`${t.id}_${i}`,s=l?(F[d]||[]).map(O=>({proj:O,phase:"engel"})):K[d]||[];if(!s.length){R({steps:[],tipps:["Keine Eins\xE4tze."],totalFahrzeit:"\u2013"});return}I(!0),R(null);let U=s.map((O,Y)=>{let ce=X[O.proj.type],xe=O.phase==="dc"?ce.dcDur:O.phase==="ac"?ce.acDur:O.phase.includes("ext")?4:1.5,Pe=O.phase==="dc"?ce.dcTag:O.phase==="ac"?ce.acTag:O.phase.includes("ext")?"Verl\xE4ngerung":"QS-Check";return`${Y+1}. ${O.proj.id}: ${Pe} bei ${O.proj.customer}, ${O.proj.address}, ${O.proj.plz} ${O.proj.city} (~${xe}h)`}),Q=`Du bist Dispositions-KI von bee-doo GmbH (Solar+WP) in OWL.
${l?"Bauengel":"Monteur"}: ${t.name} | Region: ${t.region} | Basis: Bielefeld
Tag: ${i} | Wetter: ${Z(i).desc} (${Z(i).rain}% Regen, ${Z(i).temp}\xB0C)
Eins\xE4tze:
${U.join(`
`)}
Optimale Tagesroute mit Fahrzeiten f\xFCr OWL-Region.
Antworte NUR als JSON: {"startzeit":"07:30","endzeit":"17:00","totalFahrzeit":"1h 30min","steps":[{"time":"07:30","action":"Abfahrt Basis Bielefeld","orderId":null,"fahrzeit":null,"dauer":null},{"time":"08:15","action":"Ankunft \u2013 Dach+DC bei Axel Reinhardt","orderId":"P-2026-001","fahrzeit":"45 min","dauer":"7h"}],"tipps":["Tipp 1"]}`;try{let ce=((await(await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:1200,messages:[{role:"user",content:Q}]})})).json()).content||[]).map(xe=>xe.text||"").join("");R(JSON.parse(ce.replace(/```json?|```/g,"").trim())),P(`\u{1F916} KI-Route ${t.name} ${i} generiert`,"info")}catch{R({steps:[],tipps:["Fehler bei Routenberechnung"],totalFahrzeit:"\u2013"})}I(!1)};return React.createElement("div",{style:{minHeight:"100vh",background:Ve,color:G,fontFamily:"'IBM Plex Sans',system-ui,sans-serif",display:"flex",flexDirection:"column",overflow:"hidden"}},React.createElement("header",{style:{background:te,borderBottom:`1px solid ${u}`,height:52,display:"flex",alignItems:"center",padding:"0 14px",gap:8,flexShrink:0,zIndex:100}},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:7}},React.createElement("div",{style:{background:E,color:ae,fontWeight:900,fontSize:14,padding:"3px 8px",borderRadius:5,letterSpacing:"-0.5px"}},"bee-doo"),React.createElement("span",{style:{color:$,fontSize:12,fontWeight:300,letterSpacing:"0.08em"}},"DISPATCH"),React.createElement("div",{style:{width:1,height:16,background:u,margin:"0 4px"}})),[["week","\u{1F4C5} Woche"],["month","\u{1F4C6} Monat"],["capacity","\u{1F4CA} Kapazit\xE4t"]].map(([t,i])=>React.createElement("button",{key:t,onClick:()=>v(t),style:{background:f===t?E+"22":"transparent",color:f===t?E:$,border:`1px solid ${f===t?E+"44":"transparent"}`,borderRadius:6,padding:"4px 12px",fontSize:12,cursor:"pointer",fontWeight:f===t?600:400}},i)),React.createElement("div",{style:{flex:1}}),f==="week"&&React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"flex",alignItems:"center",gap:3,background:V,borderRadius:7,padding:"2px 2px",border:`1px solid ${u}`}},React.createElement(be,{onClick:()=>n(t=>{let i=new Date(t);return i.setDate(i.getDate()-7),i})},"\u2039"),React.createElement("span",{style:{fontSize:12,fontWeight:700,minWidth:62,textAlign:"center"}},"KW ",Qe(e)),React.createElement(be,{onClick:()=>n(t=>{let i=new Date(t);return i.setDate(i.getDate()+7),i})},"\u203A")),React.createElement("button",{onClick:()=>n(new Date("2026-02-23")),style:{background:"none",border:`1px solid ${u}`,color:y,borderRadius:5,padding:"3px 8px",fontSize:11,cursor:"pointer"}},"Heute")),f==="month"&&React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"flex",alignItems:"center",gap:3,background:V,borderRadius:7,padding:"2px 2px",border:`1px solid ${u}`}},React.createElement(be,{onClick:()=>H(t=>{let i=t.month-1,l=t.year;return i<0&&(i=11,l--),{year:l,month:i}})},"\u2039"),React.createElement("span",{style:{fontSize:12,fontWeight:700,minWidth:100,textAlign:"center"}},new Date(k.year,k.month,1).toLocaleDateString("de-DE",{month:"long",year:"numeric"})),React.createElement(be,{onClick:()=>H(t=>{let i=t.month+1,l=t.year;return i>11&&(i=0,l++),{year:l,month:i}})},"\u203A"))),React.createElement("div",{style:{display:"flex",gap:8,fontSize:11}},React.createElement(he,{col:de,label:`DC ${fe.dc}`}),React.createElement(he,{col:re,label:`AC ${fe.ac}`}),fe.ext>0&&React.createElement(he,{col:A,label:`\u{1F504} ${fe.ext}`}),React.createElement(he,{col:Ge,label:`\u{1F54A}\uFE0F ${fe.engel}`})),React.createElement("button",{onClick:()=>_(t=>!t),style:{position:"relative",background:m?E+"22":"none",border:`1px solid ${m?E+"44":u}`,color:m?E:$,borderRadius:6,padding:"4px 10px",cursor:"pointer",fontSize:13}},"\u{1F514}",D.length>0&&React.createElement("span",{style:{position:"absolute",top:2,right:2,background:N,color:"#fff",borderRadius:"50%",fontSize:9,width:12,height:12,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,lineHeight:1}},Math.min(D.length,9)))),!r&&me.length>0&&React.createElement("div",{style:{background:"rgba(248,113,113,0.05)",borderBottom:`1px solid ${N}22`,padding:"4px 14px",display:"flex",gap:7,flexWrap:"wrap",alignItems:"center",flexShrink:0}},React.createElement("span",{style:{color:N,fontSize:10,fontWeight:800,letterSpacing:"0.06em",flexShrink:0}},"ALERTS"),me.map((t,i)=>React.createElement("span",{key:i,style:{background:t.type==="weather"?h+"12":t.type==="ext"?A+"12":t.type==="partial"?j+"12":N+"12",color:t.type==="weather"?h:t.type==="ext"?A:t.type==="partial"?j:N,border:"1px solid currentColor",borderRadius:4,padding:"1px 8px",fontSize:11}},t.msg)),React.createElement("button",{onClick:()=>B(!0),style:{marginLeft:"auto",background:"none",border:"none",color:y,cursor:"pointer",fontSize:13}},"\u2715")),React.createElement("div",{style:{flex:1,display:"flex",overflow:"hidden"}},React.createElement("aside",{style:{width:228,background:te,borderRight:`1px solid ${u}`,display:"flex",flexDirection:"column",flexShrink:0,overflow:"hidden"}},React.createElement("div",{style:{padding:"8px 10px",borderBottom:`1px solid ${u}`}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4}},React.createElement("span",{style:{fontSize:10,fontWeight:800,color:$,textTransform:"uppercase",letterSpacing:"0.08em"}},"Ungeplant"),React.createElement(st,{val:se.length,col:se.length>0?N:L})),$e.length>0&&React.createElement("div",{style:{background:A+"11",border:`1px solid ${A}33`,borderRadius:5,padding:"3px 7px",fontSize:10,color:A,marginTop:3}},"\u{1F504} ",$e.length," Projekt(e) verl\xE4ngert"),ve.length>0&&React.createElement("div",{style:{background:h+"11",border:`1px solid ${h}22`,borderRadius:5,padding:"3px 7px",fontSize:10,color:h,marginTop:3}},"\u26A0\uFE0F ",ve.length," ohne AC/Bauengel")),React.createElement("div",{style:{flex:1,overflowY:"auto",padding:"6px 8px"}},se.length===0&&ve.length===0&&React.createElement("div",{style:{textAlign:"center",color:y,fontSize:12,paddingTop:28}},"\u2705 Alle eingeplant!"),[...se,...ve].map(t=>{let i=X[t.type],l=t.status==="dc_planned",d=(t.dcExtraDates||[]).length+(t.acExtraDates||[]).length>0;return React.createElement("div",{key:t.id,onClick:()=>a({type:"plan",proj:t}),style:{background:V,border:`1px solid ${l?j:t.priority==="high"?N:t.priority==="medium"?h:u}`,borderLeft:`3px solid ${l?j:t.priority==="high"?N:t.priority==="medium"?h:L}`,borderRadius:7,padding:"7px 9px",marginBottom:4,cursor:"pointer"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:2}},React.createElement("span",{style:{fontSize:10,color:y,fontWeight:600}},t.id),React.createElement("span",{style:{fontSize:10,color:i.color,background:i.color+"15",borderRadius:3,padding:"0 4px",fontWeight:700}},i.icon," ",i.label)),React.createElement("div",{style:{fontSize:12,fontWeight:700,color:G,marginBottom:1}},t.customer),React.createElement("div",{style:{fontSize:11,color:$}},t.plz," ",t.city),i.twoDay&&React.createElement("div",{style:{display:"flex",gap:3,marginTop:4}},React.createElement(ke,{phase:"DC",ok:!!t.dcTechId,date:t.dcDate}),React.createElement(ke,{phase:"AC",ok:!!t.acTechId,date:t.acDate}),React.createElement(ke,{phase:"\u{1F54A}\uFE0F",ok:!!t.engelId,date:t.acDate||t.dcDate}),d&&React.createElement("span",{style:{background:A+"20",color:A,borderRadius:3,padding:"1px 4px",fontSize:9,fontWeight:700}},"+Ext")))})),React.createElement("div",{style:{padding:"6px 8px",borderTop:`1px solid ${u}`}},React.createElement("div",{style:{fontSize:10,color:y,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.06em"}},"Monteure"),React.createElement("div",{style:{display:"flex",gap:3}},[["all","Alle"],["own","Eigene"],["sub","Subs"]].map(([t,i])=>React.createElement("button",{key:t,onClick:()=>p(t),style:{flex:1,background:C===t?E+"22":"transparent",color:C===t?E:$,border:`1px solid ${C===t?E+"44":u}`,borderRadius:5,padding:"4px 0",fontSize:10,cursor:"pointer",fontWeight:C===t?700:400}},i))))),m&&React.createElement("div",{style:{width:280,background:te,borderRight:`1px solid ${u}`,display:"flex",flexDirection:"column",flexShrink:0,overflow:"hidden"}},React.createElement("div",{style:{padding:"8px 12px",borderBottom:`1px solid ${u}`,display:"flex",justifyContent:"space-between",alignItems:"center"}},React.createElement("span",{style:{fontSize:11,fontWeight:700,color:$,textTransform:"uppercase",letterSpacing:"0.08em"}},"Aktivit\xE4ten"),React.createElement("button",{onClick:()=>c([]),style:{background:"none",border:"none",color:y,cursor:"pointer",fontSize:10}},"L\xF6schen")),React.createElement("div",{style:{flex:1,overflowY:"auto"}},D.length===0?React.createElement("div",{style:{padding:20,color:y,fontSize:12,textAlign:"center"}},"Noch nichts"):D.map(t=>React.createElement("div",{key:t.id,style:{padding:"5px 12px",borderBottom:`1px solid ${u}22`,fontSize:11}},React.createElement("div",{style:{color:t.type==="error"?N:t.type==="warn"?h:t.type==="assign"?L:t.type==="sms"?j:t.type==="mail"?ee:t.type==="engel"?T:$,lineHeight:1.4}},t.msg),React.createElement("div",{style:{color:y,fontSize:9,marginTop:1}},t.time))))),React.createElement("main",{style:{flex:1,overflow:"auto"}},f==="week"&&React.createElement(et,{weekDays:z,techs:le,engel:pe,techSlots:K,engelSlots:F,projekte:o,onCell:t=>a({type:"plan",proj:t}),onExtend:(t,i,l)=>a({type:"extend",proj:t,phase:i,defaultDate:l}),onRoute:(t,i,l)=>{R(null),a({type:"route",who:t,day:i,isEngel:l})},dragId:x,setDragId:S,onDrop:(t,i,l,d)=>{let s=o.find(Q=>Q.id===t);if(!s)return;let U=d==="dc"?{dcTechId:i,dcDate:l}:{acTechId:i,acDate:l};ne(t,U),ge(s,U)}}),f==="month"&&React.createElement(tt,{year:k.year,month:k.month,techs:le,engel:pe,techSlots:K,engelSlots:F,projekte:o,onCell:t=>a({type:"plan",proj:t}),onExtend:(t,i,l)=>a({type:"extend",proj:t,phase:i,defaultDate:l})}),f==="capacity"&&React.createElement(lt,{weekDays:z,techs:le,engel:pe,techSlots:K,engelSlots:F,projekte:o}))),g?.type==="plan"&&React.createElement(it,{proj:g.proj,weekDays:z,techs:ie,engel:pe,techSlots:K,engelSlots:F,onSave:(t,i)=>{ne(t,i),ge(g.proj,i),a(null)},onClose:()=>a(null)}),g?.type==="extend"&&React.createElement(nt,{proj:g.proj,phase:g.phase,defaultDate:g.defaultDate,techs:ie,onExtend:ue,onRemove:oe,onClose:()=>a(null)}),g?.type==="route"&&React.createElement(ot,{who:g.who,day:g.day,isEngel:g.isEngel,techSlots:K,engelSlots:F,aiRoute:J,aiLoading:W,onGenerate:()=>Le(g.who,q(g.day),g.isEngel),onClose:()=>{a(null),R(null),I(!1)}}))}function et({weekDays:e,techs:n,engel:o,techSlots:b,engelSlots:f,projekte:v,onCell:g,onExtend:a,onRoute:D,dragId:c,setDragId:m,onDrop:_}){let[C,p]=(0,w.useState)(null),r="148px repeat(5,1fr)",B=(x,S,W)=>{c&&(_(c,x,S,W),m(null)),p(null)};return React.createElement("div",{style:{minWidth:820}},React.createElement("div",{style:{display:"grid",gridTemplateColumns:r,position:"sticky",top:0,zIndex:30,background:ae}},React.createElement("div",{style:{background:V,borderRight:`1px solid ${u}`,borderBottom:`1px solid ${u}`,padding:"8px 10px"}},React.createElement("span",{style:{fontSize:10,color:y,fontWeight:700,textTransform:"uppercase",letterSpacing:"0.06em"}},"Person")),e.map(x=>{let S=q(x),W=Z(S),I=S==="2026-02-23";return React.createElement("div",{key:S,style:{background:I?E+"0D":V,borderRight:`1px solid ${u}`,borderBottom:`1px solid ${u}`,padding:"7px 10px",textAlign:"center"}},React.createElement("div",{style:{fontSize:13,fontWeight:I?800:500,color:I?E:G}},M(x)),React.createElement("div",{style:{marginTop:3,display:"flex",alignItems:"center",justifyContent:"center",gap:5}},React.createElement("span",{style:{fontSize:13}},W.icon),React.createElement("span",{style:{fontSize:11,fontWeight:600,color:W.warn?h:$}},W.temp,"\xB0C"),React.createElement("span",{style:{fontSize:10,color:y}},W.rain,"%\u{1F4A7}"),W.warn&&React.createElement("span",{style:{background:h+"22",color:h,borderRadius:3,padding:"0 4px",fontSize:9,fontWeight:800}},"\u26A0\uFE0F")),React.createElement("div",{style:{fontSize:10,color:y,marginTop:2}},W.desc))})),React.createElement(Be,{label:"\u{1F477} Monteure",count:n.length,COL:r}),n.map(x=>{let S=e.reduce((W,I)=>W+(b[`${x.id}_${q(I)}`]||[]).length,0);return React.createElement("div",{key:x.id,style:{display:"grid",gridTemplateColumns:r}},React.createElement(Ie,{who:x,weekLoad:S,maxCap:x.cap*5}),e.map(W=>{let I=q(W),J=`${x.id}_${I}`,R=b[J]||[],k=R.length>=x.cap,H=C===J;return React.createElement(_e,{key:I,full:k,isDt:H,onDragOver:z=>{z.preventDefault(),p(J)},onDragLeave:()=>p(null),onDrop:()=>B(x.id,I,"dc")},R.map(({proj:z,phase:K})=>{let F=Z(I),P=(K==="dc"||K==="dc_ext")&&(z.type==="pv_komplett"||z.type==="pv_dach")&&F.warn;return React.createElement(at,{key:`${z.id}_${K}`,proj:z,phase:K,roofWarn:P,onClick:()=>g(z),onExtendClick:ne=>{ne.stopPropagation(),a(z,K.replace("_ext",""),I)},draggable:!0,onDragStart:()=>m(z.id),onDragEnd:()=>m(null),showRoute:R.length>1,onRoute:()=>D(x,W,!1)})}),k&&React.createElement("div",{style:{fontSize:9,color:N,textAlign:"center",fontWeight:700}},"\u25CF VOLL"),H&&!k&&React.createElement(dt,null))}))}),React.createElement(Be,{label:"\u{1F54A}\uFE0F Bauengel",count:o.length,COL:r,color:T}),o.map(x=>{let S=e.reduce((W,I)=>W+(f[`${x.id}_${q(I)}`]||[]).length,0);return React.createElement("div",{key:x.id,style:{display:"grid",gridTemplateColumns:r}},React.createElement(Ie,{who:x,weekLoad:S,maxCap:x.cap*5,isEngel:!0}),e.map(W=>{let I=q(W),J=`${x.id}_${I}`,R=f[J]||[],k=R.length>=x.cap;return React.createElement(_e,{key:I,full:k},R.map(H=>{let z=X[H.type];return React.createElement("div",{key:H.id,onClick:()=>g(H),style:{background:T+"10",border:`1px solid ${T}44`,borderLeft:`3px solid ${T}`,borderRadius:5,padding:"4px 6px",marginBottom:3,cursor:"pointer"}},React.createElement("div",{style:{fontSize:10,fontWeight:700,color:T}},"\u{1F54A}\uFE0F QS"),React.createElement("div",{style:{fontSize:11,color:G,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},H.customer.split(" ")[0]),React.createElement("div",{style:{fontSize:9,color:y}},H.id," \xB7 ",z.icon))}),R.length>1&&React.createElement("button",{onClick:()=>D(x,W,!0),style:{position:"absolute",bottom:3,right:3,background:T+"18",color:T,border:"none",borderRadius:3,padding:"1px 5px",fontSize:9,cursor:"pointer",fontWeight:700}},"\u{1F5FA}\uFE0F"),k&&React.createElement("div",{style:{fontSize:9,color:N,textAlign:"center",fontWeight:700}},"\u25CF VOLL"))}))}))}function tt({year:e,month:n,techs:o,engel:b,techSlots:f,engelSlots:v,projekte:g,onCell:a,onExtend:D}){let c=(0,w.useMemo)(()=>je(e,n),[e,n]),m=(0,w.useMemo)(()=>[...o.map(r=>({...r,isEngel:!1})),...b.map(r=>({...r,isEngel:!0}))],[o,b]),_=52,C=110,p=_+m.length*C;return React.createElement("div",{style:{overflow:"auto",height:"100%"}},React.createElement("div",{style:{minWidth:p}},React.createElement("div",{style:{display:"flex",position:"sticky",top:0,zIndex:30,background:ae}},React.createElement("div",{style:{width:_,flexShrink:0,background:V,borderRight:`1px solid ${u}`,borderBottom:`1px solid ${u}`,padding:"8px 4px",display:"flex",alignItems:"flex-end",justifyContent:"center"}},React.createElement("span",{style:{fontSize:9,color:y,fontWeight:700,textTransform:"uppercase",writingMode:"vertical-lr",letterSpacing:"0.05em"}},"TAG")),m.map((r,B)=>{let x=r.isEngel&&(B===0||!m[B-1].isEngel);return React.createElement("div",{key:`${r.isEngel?"e":"t"}${r.id}`,style:{width:C,flexShrink:0,borderLeft:x?`2px solid ${T}44`:`1px solid ${u}`,borderBottom:`1px solid ${u}`,background:r.isEngel?T+"06":V,padding:"6px 6px 6px",textAlign:"center"}},React.createElement("div",{style:{width:26,height:26,borderRadius:"50%",margin:"0 auto 3px",background:(r.color||$)+"22",color:r.color||$,display:"flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:800,border:`1px solid ${r.color||$}30`}},r.ini),React.createElement("div",{style:{fontSize:10,fontWeight:700,color:G,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},r.name.split(" ")[0]),React.createElement("div",{style:{fontSize:9,color:y,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},r.name.split(" ").slice(1).join(" ")),r.isEngel&&React.createElement("div",{style:{fontSize:8,color:T,fontWeight:700,marginTop:1}},"\u{1F54A}\uFE0F ENGEL"),r.sub&&React.createElement("div",{style:{fontSize:8,color:y,marginTop:1}},"SU"))})),c.map(r=>{let B=Z(r),x=r==="2026-02-23",S=new Date(r+"T12:00:00"),W=S.getDate(),I=S.toLocaleDateString("de-DE",{weekday:"short"}),J=S.getDay()===1;return React.createElement("div",{key:r,style:{display:"flex",borderBottom:`1px solid ${J?u:u+"66"}`}},React.createElement("div",{style:{width:_,flexShrink:0,background:x?E+"0D":B.warn?h+"06":V,borderRight:`1px solid ${u}`,padding:"6px 4px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,position:"sticky",left:0,zIndex:10,borderTop:J?`1px solid ${u}44`:"none"}},React.createElement("span",{style:{fontSize:15,fontWeight:800,color:x?E:G,lineHeight:1}},W),React.createElement("span",{style:{fontSize:9,color:x?E+"99":y,fontWeight:600}},I),React.createElement("span",{style:{fontSize:12,lineHeight:1}},B.icon),B.warn&&React.createElement("span",{style:{fontSize:8,color:h,fontWeight:800}},"\u26A0\uFE0F")),m.map((R,k)=>{let H=R.isEngel&&(k===0||!m[k-1].isEngel),z=`${R.id}_${r}`,K=R.isEngel?(v[z]||[]).map(F=>({proj:F,phase:"engel"})):f[z]||[];return React.createElement("div",{key:`${R.isEngel?"e":"t"}${R.id}`,style:{width:C,flexShrink:0,minHeight:K.length>0?60:36,borderLeft:H?`2px solid ${T}33`:`1px solid ${u}`,background:R.isEngel?T+"04":x?E+"04":"transparent",padding:K.length>0?"4px 4px":"2px 4px",position:"relative"}},K.map(({proj:F,phase:P})=>{if(!F)return null;let ne=X[F.type],ge=P.includes("ext"),ue=P==="engel",oe=ue?T:ge?A:P==="dc"?de:re,me=ue?"QS":ge?`${P.replace("_ext","").toUpperCase()}+`:P.toUpperCase(),le=(P==="dc"||P==="dc_ext")&&(F.type==="pv_komplett"||F.type==="pv_dach")&&B.warn;return React.createElement("div",{key:`${F.id}_${P}`,onClick:()=>a(F),style:{background:oe+"12",border:`1px solid ${le?N:oe}44`,borderLeft:`3px solid ${le?N:oe}`,borderRadius:4,padding:"3px 5px",marginBottom:2,cursor:"pointer",position:"relative"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:2}},React.createElement("span",{style:{fontSize:10,fontWeight:700,color:G,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1}},F.customer.split(" ")[0]),React.createElement("span",{style:{background:oe+"22",color:oe,borderRadius:3,padding:"0 3px",fontSize:8,fontWeight:800,flexShrink:0}},me)),React.createElement("div",{style:{fontSize:8,color:y}},F.id,le?" \u{1F327}\uFE0F":""),!ue&&React.createElement("button",{onClick:se=>{se.stopPropagation(),D(F,P.replace("_ext",""),r)},title:"Verl\xE4ngern / Verl\xE4ngerung verwalten",style:{position:"absolute",top:2,right:2,background:A+"22",color:A,border:"none",borderRadius:3,padding:"0 3px",fontSize:9,cursor:"pointer",lineHeight:"14px",display:"none"},className:"ext-btn"},"+"))}),K.length===0&&B.warn&&R.skills?.includes("pv_dach")&&React.createElement("div",{style:{fontSize:8,color:h+"66",textAlign:"center",paddingTop:2}},"\u26A0\uFE0F"))}))})),React.createElement("style",null,`
        div:hover .ext-btn { display: block !important; }
        @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.2} }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: ${te}; }
        ::-webkit-scrollbar-thumb { background: ${u}; border-radius: 3px; }
      `))}function nt({proj:e,phase:n,defaultDate:o,techs:b,onExtend:f,onRemove:v,onClose:g}){let a=X[e.type],c=e[n==="dc"?"dcExtraDates":"acExtraDates"]||[],m=n==="dc"?de:re,_=n==="dc"?a.dcTag:a.acTag,C=n==="dc"?e.dcDate:e.acDate,p=n==="dc"?e.dcTechId:e.acTechId,r=b.find(k=>k.id===p),B=[...c].sort().slice(-1)[0]||C,x=B?we(B):"",[S,W]=(0,w.useState)(x),I=["Wetterverz\xF6gerung (Regen/Sturm)","Materialengpass / Lieferverzug","Technisches Problem auf der Baustelle","Mehr Module als geplant","Zugangsprobleme (Dach/Keller)","Kundenwunsch","Sonstiges"],[J,R]=(0,w.useState)(I[0]);return React.createElement(ze,{onClose:g},React.createElement("div",{style:{width:520,maxWidth:"95vw"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:16}},React.createElement("div",null,React.createElement("div",{style:{fontSize:10,color:y,fontWeight:600,letterSpacing:"0.06em",marginBottom:3}},e.id," \xB7 ",n.toUpperCase()," VERL\xC4NGERUNG"),React.createElement("div",{style:{fontSize:18,fontWeight:800}},e.customer),React.createElement("div",{style:{fontSize:12,color:$,marginTop:1}},e.address," \xB7 ",e.plz," ",e.city)),React.createElement("button",{onClick:g,style:{background:"none",border:"none",color:$,cursor:"pointer",fontSize:20}},"\u2715")),React.createElement("div",{style:{background:m+"0D",border:`1px solid ${m}33`,borderRadius:8,padding:"10px 12px",marginBottom:14}},React.createElement("div",{style:{display:"flex",gap:10,alignItems:"center",marginBottom:6}},React.createElement("div",{style:{background:m+"22",color:m,borderRadius:5,padding:"2px 8px",fontSize:11,fontWeight:800}},n.toUpperCase()),React.createElement("span",{style:{fontSize:13,fontWeight:700,color:m}},_),r&&React.createElement("span",{style:{fontSize:12,color:$,marginLeft:"auto"}},"\u{1F477} ",r.name)),React.createElement("div",{style:{fontSize:12,color:$}},"Haupttag: ",React.createElement("strong",{style:{color:G}},C?Ze(C):"\u2013")),c.length>0&&React.createElement("div",{style:{marginTop:6}},React.createElement("div",{style:{fontSize:11,color:A,fontWeight:700,marginBottom:4}},"\u{1F504} Aktive Verl\xE4ngerungen:"),React.createElement("div",{style:{display:"flex",gap:4,flexWrap:"wrap"}},c.map(k=>React.createElement("div",{key:k,style:{background:A+"15",border:`1px solid ${A}44`,borderRadius:5,padding:"3px 8px",fontSize:11,color:A,display:"flex",alignItems:"center",gap:5}},React.createElement("span",null,M(k)),React.createElement("span",{style:{color:Z(k).warn?"\u{1F327}\uFE0F":L+"99",fontSize:10}},Z(k).icon),React.createElement("button",{onClick:()=>{v(e.id,n,k)},style:{background:"none",border:"none",color:N,cursor:"pointer",fontSize:12,padding:0,lineHeight:1}},"\u2715")))))),React.createElement("div",{style:{marginBottom:14}},React.createElement("div",{style:{fontSize:12,fontWeight:700,color:G,marginBottom:8}},"\u2795 Neuen Verl\xE4ngerungstag hinzuf\xFCgen"),React.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,marginBottom:10}},React.createElement("div",null,React.createElement("div",{style:{fontSize:10,color:y,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.05em"}},"Datum"),React.createElement("input",{type:"date",value:S,onChange:k=>W(k.target.value),style:{...ye,width:"100%"}}),S&&(()=>{let k=Z(S);return React.createElement("div",{style:{marginTop:4,background:k.warn?h+"10":L+"08",border:`1px solid ${k.warn?h:L}33`,borderRadius:5,padding:"4px 8px",fontSize:11,color:k.warn?h:L}},k.icon," ",k.desc," \xB7 ",k.temp,"\xB0C \xB7 ",k.rain,"% Regen",k.warn&&n==="dc"?" \u26A0\uFE0F Dach!":"")})()),React.createElement("div",null,React.createElement("div",{style:{fontSize:10,color:y,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.05em"}},"Grund"),React.createElement("select",{value:J,onChange:k=>R(k.target.value),style:{...ye,width:"100%"}},I.map(k=>React.createElement("option",{key:k,value:k},k))))),S&&c.includes(S)&&React.createElement("div",{style:{fontSize:11,color:h,marginBottom:8}},"\u26A0\uFE0F Dieser Tag ist bereits als Verl\xE4ngerung eingetragen."),React.createElement("button",{disabled:!S||c.includes(S),onClick:()=>{f(e.id,n,S),g()},style:{width:"100%",background:S&&!c.includes(S)?A:"#2a2d3a",color:S&&!c.includes(S)?ae:y,border:"none",borderRadius:8,padding:"10px",fontSize:13,fontWeight:800,cursor:S&&!c.includes(S)?"pointer":"default",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:6}},"\u{1F504} Verl\xE4ngerung eintragen & Team benachrichtigen")),React.createElement("div",{style:{background:V,borderRadius:7,padding:"8px 10px",fontSize:11,color:$}},"\u{1F4A1} Nach dem Speichern wird automatisch eine SMS an den Monteur und eine Nachricht an den Kunden gesendet.")))}function it({proj:e,weekDays:n,techs:o,engel:b,techSlots:f,engelSlots:v,onSave:g,onClose:a}){let D=X[e.type],[c,m]=(0,w.useState)(e.dcDate||""),[_,C]=(0,w.useState)(e.dcTechId||""),[p,r]=(0,w.useState)(e.acDate||""),[B,x]=(0,w.useState)(e.acTechId||""),[S,W]=(0,w.useState)(e.engelId||"");(0,w.useEffect)(()=>{c&&!p&&D.twoDay&&r(we(c))},[c]);let I=c?Z(c):null,J=p?Z(p):null,R=o.filter(z=>z.skills.includes(D.dcSkill)),k=o.filter(z=>z.skills.includes(D.acSkill)),H=D.twoDay?c&&_&&p&&B&&S:D.dcSkill?c&&_&&S:p&&B&&S;return React.createElement(ze,{onClose:a},React.createElement("div",{style:{width:560,maxWidth:"95vw",maxHeight:"90vh",overflowY:"auto"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:14}},React.createElement("div",null,React.createElement("div",{style:{fontSize:10,color:y,fontWeight:600,letterSpacing:"0.06em",marginBottom:3}},e.id),React.createElement("div",{style:{fontSize:18,fontWeight:800}},e.customer),React.createElement("div",{style:{fontSize:12,color:$,marginTop:2}},e.address," \xB7 ",e.plz," ",e.city)),React.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},React.createElement("span",{style:{background:X[e.type].color+"18",color:X[e.type].color,borderRadius:6,padding:"3px 10px",fontSize:12,fontWeight:700}},X[e.type].icon," ",X[e.type].label),React.createElement("button",{onClick:a,style:{background:"none",border:"none",color:$,cursor:"pointer",fontSize:20}},"\u2715"))),e.notes&&React.createElement("div",{style:{background:V,borderRadius:6,padding:"6px 10px",fontSize:12,color:$,marginBottom:12}},"\u{1F4DD} ",e.notes),e.status!=="unplanned"&&React.createElement(rt,{proj:e,pt:D}),D.dcSkill&&React.createElement(We,{title:`Tag 1 \u2014 ${D.dcTag}`,phase:"DC",phaseColor:de,date:c,setDate:m,techId:_,setTechId:C,techs:R,weekDays:n,weather:I,skill:D.dcSkill,dur:D.dcDur}),D.acSkill&&React.createElement(We,{title:`Tag 2 \u2014 ${D.acTag}`,phase:"AC",phaseColor:re,date:p,setDate:r,techId:B,setTechId:x,techs:k,weekDays:n,weather:J,skill:D.acSkill,dur:D.acDur,note:D.twoDay&&c?`Empfehlung: ${M(we(c))}`:void 0}),React.createElement("div",{style:{background:T+"08",border:`1px solid ${T}22`,borderRadius:10,padding:"12px 14px",marginBottom:12}},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8}},React.createElement("div",{style:{width:26,height:26,borderRadius:"50%",background:T+"22",color:T,display:"flex",alignItems:"center",justifyContent:"center",fontSize:13}},"\u{1F54A}\uFE0F"),React.createElement("div",null,React.createElement("div",{style:{fontSize:13,fontWeight:700,color:T}},"Bauengel"),React.createElement("div",{style:{fontSize:11,color:y}},"Ab Starttag (Tag 1) bis Abnahme vor Ort \xB7"," ",React.createElement("strong",{style:{color:G}},c?M(c):"Datum ausstehend")))),React.createElement("select",{value:S,onChange:z=>W(z.target.value),style:{...ye,width:"100%"}},React.createElement("option",{value:""},"Bauengel w\xE4hlen..."),b.map(z=>{let K=c?(v[`${z.id}_${c}`]||[]).length:0;return React.createElement("option",{key:z.id,value:z.id},z.name," (",z.region,") \u2013 ",K,"/",z.cap," Eins\xE4tze am DC-Tag")}))),React.createElement("button",{onClick:()=>{let z={dcDate:c||null,dcTechId:_?parseInt(_):null,acDate:p||null,acTechId:B?parseInt(B):null,engelId:S?parseInt(S):null};g(e.id,z)},disabled:!H,style:{width:"100%",background:H?E:"#2a2d3a",color:H?ae:y,border:"none",borderRadius:8,padding:"10px",fontSize:13,cursor:H?"pointer":"default",fontWeight:800,transition:"all 0.2s"}},H?"\u2705 Einplanen & Benachrichtigen":"\u23F3 Alle Pflichtfelder ausf\xFCllen")))}function We({title:e,phase:n,phaseColor:o,date:b,setDate:f,techId:v,setTechId:g,techs:a,weekDays:D,weather:c,dur:m,note:_}){let C=a.find(p=>p.id===parseInt(v));return React.createElement("div",{style:{background:o+"08",border:`1px solid ${o}22`,borderRadius:10,padding:"12px 14px",marginBottom:10}},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8}},React.createElement("div",{style:{background:o+"22",color:o,borderRadius:5,padding:"2px 8px",fontSize:11,fontWeight:800}},n),React.createElement("span",{style:{fontSize:13,fontWeight:700,color:o}},e),React.createElement("span",{style:{fontSize:11,color:y,marginLeft:"auto"}},"~",m,"h")),React.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:8}},React.createElement("div",null,React.createElement("div",{style:{fontSize:10,color:y,marginBottom:3,textTransform:"uppercase",letterSpacing:"0.05em"}},"Datum"),React.createElement("select",{value:b,onChange:p=>f(p.target.value),style:{...ye,width:"100%"}},React.createElement("option",{value:""},"Tag w\xE4hlen..."),D.map(p=>{let r=q(p),B=Z(r),x=n==="DC"&&B.warn;return React.createElement("option",{key:r,value:r},M(p)," ",x?"\u26A0\uFE0F":""," (",B.icon," ",B.rain,"%)")})),_&&React.createElement("div",{style:{fontSize:10,color:y,marginTop:3}},"\u{1F4A1} ",_)),React.createElement("div",null,React.createElement("div",{style:{fontSize:10,color:y,marginBottom:3,textTransform:"uppercase",letterSpacing:"0.05em"}},"Monteur"),React.createElement("select",{value:v,onChange:p=>g(p.target.value),style:{...ye,width:"100%"}},React.createElement("option",{value:""},"Monteur w\xE4hlen..."),a.map(p=>React.createElement("option",{key:p.id,value:p.id},p.name," \u2013 ",p.region,p.sub?" (SU)":""))))),c&&React.createElement("div",{style:{background:c.warn?h+"10":V,border:`1px solid ${c.warn?h:u}33`,borderRadius:6,padding:"6px 10px",display:"flex",gap:10,alignItems:"center"}},React.createElement("span",{style:{fontSize:18}},c.icon),React.createElement("div",null,React.createElement("div",{style:{fontSize:12,fontWeight:600,color:c.warn?h:G}},c.desc," \xB7 ",c.temp,"\xB0C"),React.createElement("div",{style:{fontSize:11,color:$}},c.rain,"% Regen",c.warn&&n==="DC"?" \u2013 Dachmontage pr\xFCfen \u26A0\uFE0F":"")),c.warn&&n==="DC"&&React.createElement("div",{style:{marginLeft:"auto",background:h+"22",color:h,borderRadius:5,padding:"3px 8px",fontSize:11,fontWeight:700}},"ACHTUNG")))}function ot({who:e,day:n,isEngel:o,techSlots:b,engelSlots:f,aiRoute:v,aiLoading:g,onGenerate:a,onClose:D}){let c=q(n),m=Z(c),_=`${e.id}_${c}`,C=o?(f[_]||[]).map(p=>({proj:p,phase:"engel"})):b[_]||[];return React.createElement(ze,{onClose:D},React.createElement("div",{style:{width:540,maxWidth:"95vw",maxHeight:"90vh",overflowY:"auto"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12}},React.createElement("div",null,React.createElement("div",{style:{fontSize:10,color:y,fontWeight:600,letterSpacing:"0.06em",marginBottom:3}},"ROUTE"),React.createElement("div",{style:{fontSize:16,fontWeight:800}},"\u{1F5FA}\uFE0F ",e.name," \xB7 ",M(n))),React.createElement("button",{onClick:D,style:{background:"none",border:"none",color:$,cursor:"pointer",fontSize:20}},"\u2715")),React.createElement("div",{style:{background:m.warn?h+"10":V,border:`1px solid ${m.warn?h:u}33`,borderRadius:7,padding:"7px 12px",marginBottom:12,display:"flex",gap:10,alignItems:"center"}},React.createElement("span",{style:{fontSize:20}},m.icon),React.createElement("div",null,React.createElement("div",{style:{fontSize:12,fontWeight:600,color:m.warn?h:G}},m.desc," \xB7 ",m.temp,"\xB0C"),React.createElement("div",{style:{fontSize:11,color:$}},m.rain,"% Regen"))),React.createElement("div",{style:{marginBottom:12}},C.map(({proj:p,phase:r},B)=>{let x=X[p.type],S=r.includes("ext"),W=r==="engel"?T:S?A:r==="dc"?de:re,I=r==="engel"?"QS":S?`${r.replace("_ext","").toUpperCase()}+ Verl\xE4ngerung`:r==="dc"?x.dcTag:x.acTag,J=r==="dc"?x.dcDur:r==="ac"?x.acDur:S?4:1.5;return React.createElement("div",{key:`${p.id}_${r}`,style:{display:"flex",gap:8,background:V,borderRadius:7,padding:"7px 10px",marginBottom:4,alignItems:"center"}},React.createElement("div",{style:{width:22,height:22,borderRadius:"50%",background:W+"22",color:W,fontSize:11,fontWeight:800,display:"flex",alignItems:"center",justifyContent:"center"}},B+1),React.createElement("div",{style:{flex:1}},React.createElement("div",{style:{fontSize:12,fontWeight:700}},p.customer),React.createElement("div",{style:{fontSize:11,color:y}},p.address)),React.createElement("div",{style:{textAlign:"right"}},React.createElement("div",{style:{color:W,fontSize:10,fontWeight:700}},I),React.createElement("div",{style:{color:y,fontSize:10}},J,"h")))})),!g&&!v&&React.createElement("button",{onClick:a,style:{width:"100%",background:E,color:ae,border:"none",borderRadius:8,padding:"11px",fontSize:13,fontWeight:800,cursor:"pointer"}},"\u{1F916} KI-Route generieren"),g&&React.createElement("div",{style:{textAlign:"center",padding:28,color:$}},React.createElement("div",{style:{fontSize:28,marginBottom:8}},"\u2699\uFE0F"),React.createElement("div",null,"Wird optimiert...")),v&&React.createElement("div",{style:{borderTop:`1px solid ${u}`,paddingTop:12}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10}},React.createElement("span",{style:{fontSize:13,fontWeight:700,color:L}},"\u2705 Route"),React.createElement("div",{style:{display:"flex",gap:10,fontSize:11,color:$}},v.startzeit&&React.createElement("span",null,"\u{1F550} ",v.startzeit),v.endzeit&&React.createElement("span",null,"\u{1F3C1} ",v.endzeit),v.totalFahrzeit&&React.createElement("span",null,"\u{1F697} ",v.totalFahrzeit))),(v.steps||[]).map((p,r)=>React.createElement("div",{key:r,style:{display:"flex",gap:10,marginBottom:8}},React.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:10}},React.createElement("div",{style:{width:10,height:10,borderRadius:"50%",background:p.orderId?E:y,marginTop:3}}),r<v.steps.length-1&&React.createElement("div",{style:{width:1,flex:1,background:u,marginTop:3,minHeight:12}})),React.createElement("div",{style:{flex:1}},React.createElement("div",{style:{display:"flex",gap:8}},React.createElement("span",{style:{fontSize:12,color:E,fontWeight:700,minWidth:44}},p.time),React.createElement("span",{style:{fontSize:12,color:G}},p.action)),React.createElement("div",{style:{display:"flex",gap:10,marginLeft:52,marginTop:1}},p.fahrzeit&&React.createElement("span",{style:{fontSize:10,color:y}},"\u{1F697} ",p.fahrzeit),p.dauer&&React.createElement("span",{style:{fontSize:10,color:y}},"\u23F1 ",p.dauer))))),v.tipps?.length>0&&React.createElement("div",{style:{background:j+"0D",border:`1px solid ${j}22`,borderRadius:7,padding:"8px 10px",marginTop:6}},v.tipps.map((p,r)=>React.createElement("div",{key:r,style:{fontSize:12,color:$,marginBottom:2}},"\xB7 ",p))),React.createElement("button",{onClick:a,style:{marginTop:10,background:"none",border:`1px solid ${u}`,color:$,borderRadius:6,padding:"4px 12px",fontSize:11,cursor:"pointer"}},"\u{1F504} Neu"))))}function lt({weekDays:e,techs:n,engel:o,techSlots:b,engelSlots:f,projekte:v}){let g={all:v.length,fully:v.filter(a=>a.status==="fully_planned").length,partial:v.filter(a=>a.status==="dc_planned").length,unplanned:v.filter(a=>a.status==="unplanned").length,extended:v.filter(a=>(a.dcExtraDates||[]).length+(a.acExtraDates||[]).length>0).length};return React.createElement("div",{style:{padding:16,display:"grid",gridTemplateColumns:"1fr 1fr",gap:14}},React.createElement("div",{style:{gridColumn:"1/-1",display:"grid",gridTemplateColumns:"repeat(5,1fr)",gap:10}},[["Gesamt",g.all,G],["Vollst\xE4ndig",g.fully,L],["Nur DC",g.partial,h],["Ungeplant",g.unplanned,N],["Verl\xE4ngert",g.extended,A]].map(([a,D,c])=>React.createElement("div",{key:a,style:{background:te,border:`1px solid ${u}`,borderRadius:9,padding:"12px 14px"}},React.createElement("div",{style:{fontSize:11,color:$,marginBottom:4}},a),React.createElement("div",{style:{fontSize:26,fontWeight:800,color:c}},D)))),React.createElement("div",{style:{background:te,border:`1px solid ${u}`,borderRadius:10,padding:14}},React.createElement("div",{style:{fontSize:13,fontWeight:700,marginBottom:12}},"\u{1F477} Monteur-Auslastung (KW)"),n.map(a=>{let D=e.reduce((_,C)=>_+(b[`${a.id}_${q(C)}`]||[]).length,0),c=a.cap*e.length,m=c>0?D/c*100:0;return React.createElement("div",{key:a.id,style:{marginBottom:8}},React.createElement("div",{style:{display:"flex",gap:6,alignItems:"center",marginBottom:2}},React.createElement("div",{style:{width:18,height:18,borderRadius:"50%",background:a.color+"22",color:a.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:8,fontWeight:800}},a.ini),React.createElement("span",{style:{fontSize:11,flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},a.name),React.createElement("span",{style:{fontSize:11,color:m>=80?N:m>=40?h:L,fontWeight:600,minWidth:28,textAlign:"right"}},m.toFixed(0),"%")),React.createElement(Ee,{pct:m}))})),React.createElement("div",{style:{background:te,border:`1px solid ${u}`,borderRadius:10,padding:14}},React.createElement("div",{style:{fontSize:13,fontWeight:700,marginBottom:12,color:T}},"\u{1F54A}\uFE0F Bauengel-Auslastung (KW)"),o.map(a=>{let D=e.reduce((_,C)=>_+(f[`${a.id}_${q(C)}`]||[]).length,0),c=a.cap*e.length,m=c>0?D/c*100:0;return React.createElement("div",{key:a.id,style:{marginBottom:8}},React.createElement("div",{style:{display:"flex",gap:6,alignItems:"center",marginBottom:2}},React.createElement("div",{style:{width:18,height:18,borderRadius:"50%",background:T+"22",color:T,display:"flex",alignItems:"center",justifyContent:"center",fontSize:8,fontWeight:800}},a.ini),React.createElement("span",{style:{fontSize:11,flex:1}},a.name),React.createElement("span",{style:{fontSize:11,color:m>=80?N:m>=40?h:T,fontWeight:600,minWidth:28,textAlign:"right"}},m.toFixed(0),"%")),React.createElement(Ee,{pct:m,color:T}))})))}var Be=({label:e,count:n,COL:o,color:b=$})=>React.createElement("div",{style:{display:"grid",gridTemplateColumns:o,position:"sticky",top:72,zIndex:20,background:ae}},React.createElement("div",{style:{borderRight:`1px solid ${u}`,borderBottom:`1px solid ${u}`,padding:"4px 10px",display:"flex",gap:6,alignItems:"center",background:"rgba(0,0,0,0.5)"}},React.createElement("span",{style:{fontSize:10,fontWeight:800,color:b,textTransform:"uppercase",letterSpacing:"0.08em"}},e),React.createElement("span",{style:{background:b+"22",color:b,borderRadius:4,padding:"0 5px",fontSize:10,fontWeight:700}},n)),Array.from({length:5}).map((f,v)=>React.createElement("div",{key:v,style:{borderRight:`1px solid ${u}`,borderBottom:`1px solid ${u}`,background:"rgba(0,0,0,0.5)"}}))),Ie=({who:e,weekLoad:n,maxCap:o,isEngel:b=!1})=>React.createElement("div",{style:{background:V,borderRight:`1px solid ${u}`,borderBottom:`1px solid ${u}`,padding:"7px 9px",display:"flex",flexDirection:"column",gap:4}},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:6}},React.createElement("div",{style:{width:26,height:26,borderRadius:"50%",flexShrink:0,background:(e.color||$)+"20",color:e.color||$,display:"flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:800,border:`1px solid ${e.color||$}30`}},e.ini),React.createElement("div",{style:{minWidth:0}},React.createElement("div",{style:{fontSize:11,fontWeight:700,color:G,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.name),React.createElement("div",{style:{fontSize:9,color:y}},e.region,e.sub?" \xB7 SU":"",b?" \xB7 \u{1F54A}\uFE0F":""))),!b&&e.skills&&React.createElement("div",{style:{display:"flex",gap:2,flexWrap:"wrap"}},e.skills.map(f=>{let v=X[f]||{};return React.createElement("span",{key:f,style:{background:(v.color||y)+"18",color:v.color||y,borderRadius:3,padding:"1px 3px",fontSize:8,fontWeight:700}},f.replace("pv_","").replace("_"," ").toUpperCase())})),React.createElement("div",{style:{height:2,background:te,borderRadius:1,overflow:"hidden"}},React.createElement("div",{style:{height:"100%",background:n>=o*.8?N:n>=o*.4?h:L,borderRadius:1,width:`${Math.min(n/Math.max(o,1)*100,100)}%`,transition:"width 0.4s"}}))),_e=({children:e,full:n,isDt:o,onDragOver:b,onDragLeave:f,onDrop:v})=>React.createElement("div",{onDragOver:b,onDragLeave:f,onDrop:v,style:{background:o?E+"08":te,borderRight:`1px solid ${u}`,borderBottom:`1px solid ${u}`,padding:"3px 3px",minHeight:76,position:"relative",outline:o?`2px solid ${E}44`:"none",transition:"all 0.1s"}},e),Ae={gestartet:{col:L,icon:"\u25B6",label:"Gestartet",blink:!0},engel_vor_ort:{col:T,icon:"\uD83D\uDD4A\uFE0F",label:"Bauengel vor Ort",blink:!0},engel_fehlt:{col:N,icon:"\u2716",label:"Bauengel FEHLT!",blink:!0},monteur_spaet:{col:N,icon:"\u26A0",label:"Monteur VERSP\u00C4TET!",blink:!0},dc_fertig:{col:ee,icon:"\u2713",label:"DC fertig",blink:!1},ac_fertig:{col:j,icon:"\u2713",label:"AC fertig",blink:!1},abgenommen:{col:E,icon:"\u2605",label:"Abgenommen",blink:!1}},at=({proj:e,phase:n,roofWarn:o,onClick:b,draggable:f,onDragStart:v,onDragEnd:g,onExtendClick:a,showRoute:D,onRoute:c})=>{let m=X[e.type],_=n.includes("ext"),C=_?A:n==="dc"?de:n==="ac"?re:T,p=_?`${n.replace("_ext","").toUpperCase()}+`:n.toUpperCase(),r=e.baustelleStatus?Ae[e.baustelleStatus]:null;return React.createElement("div",{draggable:f,onDragStart:v,onDragEnd:g,onClick:b,style:{background:V,border:`1px solid ${o?N:r?.blink?r.col:C}44`,borderLeft:`3px solid ${o?N:r?.col||C}`,borderRadius:5,padding:"3px 5px",marginBottom:3,cursor:"grab",userSelect:"none",position:"relative",boxShadow:r?.blink?(r.col===N?`0 0 0 1px ${r.col}44`:`0 0 0 1px ${r.col}44`):"none",animation:r?.blink?(r.col===N?"pulse-red 1s ease-in-out infinite":"pulse-green 1.5s ease-in-out infinite"):void 0}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:2,alignItems:"flex-start"}},React.createElement("div",{style:{minWidth:0}},React.createElement("div",{style:{fontSize:11,fontWeight:700,color:G,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.customer.split(" ")[0]),React.createElement("div",{style:{display:"flex",gap:4,alignItems:"center",marginTop:1}},React.createElement("span",{style:{fontSize:8,color:y}},e.id),e.fotoCount>0&&React.createElement("span",{style:{fontSize:8,color:ee}},"\u{1F4F7}",e.fotoCount))),React.createElement("div",{style:{display:"flex",flexDirection:"column",gap:2,alignItems:"flex-end",flexShrink:0}},React.createElement("span",{style:{background:C+"22",color:C,borderRadius:3,padding:"0 4px",fontSize:8,fontWeight:800}},p),o&&React.createElement("span",{style:{fontSize:8,color:N}},"\u{1F327}\uFE0F"))),r&&React.createElement("div",{style:{display:"flex",alignItems:"center",gap:3,marginTop:3,background:r.col+"12",borderRadius:3,padding:"1px 5px",animation:r.blink?(r.col===N?"pulse-red-badge 0.8s ease-in-out infinite":"blink 1.4s ease-in-out infinite"):void 0}},React.createElement("span",{style:{fontSize:8,color:r.col,fontWeight:800,animation:r.blink?(r.col===N?"blink-red 0.8s ease-in-out infinite":"blink 1.4s ease-in-out infinite"):void 0}},r.icon),React.createElement("span",{style:{fontSize:8,color:r.col,fontWeight:700}},r.label),e.letzteAktualisierung&&React.createElement("span",{style:{fontSize:7,color:y,marginLeft:2}},new Date(e.letzteAktualisierung).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}))),React.createElement("button",{onClick:a,title:"Verl\xE4ngern",style:{position:"absolute",bottom:2,right:D?20:2,background:A+"25",color:A,border:"none",borderRadius:3,padding:"1px 4px",fontSize:8,cursor:"pointer",fontWeight:800,opacity:.7}},"\u{1F504}"),D&&React.createElement("button",{onClick:B=>{B.stopPropagation(),c()},style:{position:"absolute",bottom:2,right:2,background:ee+"18",color:ee,border:"none",borderRadius:3,padding:"1px 4px",fontSize:8,cursor:"pointer",fontWeight:700}},"\u{1F5FA}\uFE0F"))},dt=()=>React.createElement("div",{style:{position:"absolute",inset:0,border:`2px dashed ${E}`,borderRadius:5,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",background:E+"06"}},React.createElement("span",{style:{fontSize:18,color:E}},"+")),ke=({phase:e,ok:n,date:o})=>React.createElement("div",{style:{background:n?L+"18":te,border:`1px solid ${n?L:u}`,borderRadius:3,padding:"1px 5px",fontSize:9,color:n?L:y,fontWeight:700}},n?"\u2713":"",e,o?` ${M(o).substring(0,5)}`:"?"),rt=({proj:e,pt:n})=>{let o=ie.find(a=>a.id===e.dcTechId),b=ie.find(a=>a.id===e.acTechId),f=pe.find(a=>a.id===e.engelId),v=(e.dcExtraDates||[]).length+(e.acExtraDates||[]).length>0,g=e.baustelleStatus?Ae[e.baustelleStatus]:null;return React.createElement("div",{style:{background:e.status==="fully_planned"?L+"0D":h+"0D",border:`1px solid ${e.status==="fully_planned"?L:h}33`,borderRadius:8,padding:"10px 12px",marginBottom:12}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6}},React.createElement("div",{style:{fontSize:11,fontWeight:700,color:e.status==="fully_planned"?L:h}},e.status==="fully_planned"?"\u2705 Vollst\xE4ndig geplant":"\u23F3 DC geplant \u2013 AC/Bauengel fehlt",v&&React.createElement("span",{style:{background:A+"20",color:A,borderRadius:4,padding:"1px 6px",fontSize:10,marginLeft:8}},"\u{1F504} Verl\xE4ngerung")),g&&React.createElement("div",{style:{display:"flex",alignItems:"center",gap:5,background:g.col+"15",borderRadius:5,padding:"3px 8px",border:`1px solid ${g.col}33`}},React.createElement("span",{style:{fontSize:10,color:g.col,fontWeight:900,animation:g.blink?(g.col===N?"blink-red 0.8s ease-in-out infinite":"blink 1.4s ease-in-out infinite"):void 0}},g.blink?"\u25CF":g.icon),React.createElement("span",{style:{fontSize:11,color:g.col,fontWeight:700}},"App: ",g.label),e.letzteAktualisierung&&React.createElement("span",{style:{fontSize:9,color:y}},new Date(e.letzteAktualisierung).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})),e.fotoCount>0&&React.createElement("span",{style:{fontSize:10,color:ee}},"\u{1F4F7}",e.fotoCount))),React.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6,fontSize:11}},n.dcSkill&&React.createElement("div",null,React.createElement("div",{style:{color:de,fontWeight:700,fontSize:10}},"DC \u2013 TAG 1"),React.createElement("div",{style:{color:$}},o?.name||"\u2013"),React.createElement("div",{style:{color:y}},e.dcDate?M(e.dcDate):"\u2013",(e.dcExtraDates||[]).map(a=>React.createElement("span",{key:a,style:{color:A}}," +",M(a))))),n.acSkill&&React.createElement("div",null,React.createElement("div",{style:{color:re,fontWeight:700,fontSize:10}},"AC \u2013 TAG 2"),React.createElement("div",{style:{color:$}},b?.name||"\u2013"),React.createElement("div",{style:{color:y}},e.acDate?M(e.acDate):"\u2013",(e.acExtraDates||[]).map(a=>React.createElement("span",{key:a,style:{color:A}}," +",M(a))))),React.createElement("div",null,React.createElement("div",{style:{color:T,fontWeight:700,fontSize:10}},"\u{1F54A}\uFE0F BAUENGEL (ab Tag 1)"),React.createElement("div",{style:{color:$}},f?.name||"\u2013"),React.createElement("div",{style:{color:y}},e.dcDate?M(e.dcDate):"\u2013"," \u2192 Abnahme"))))},Ee=({pct:e,color:n})=>React.createElement("div",{style:{height:4,background:V,borderRadius:2,overflow:"hidden"}},React.createElement("div",{style:{height:"100%",background:n||(e>=80?N:e>=40?h:L),width:`${Math.min(e,100)}%`,borderRadius:2,transition:"width 0.4s"}})),he=({col:e,label:n})=>React.createElement("div",{style:{background:e+"15",color:e,borderRadius:4,padding:"2px 8px",fontSize:11,fontWeight:700}},n),st=({val:e,col:n})=>React.createElement("div",{style:{background:n+"25",color:n,borderRadius:4,padding:"0 7px",fontSize:11,fontWeight:700}},e),be=({onClick:e,children:n})=>React.createElement("button",{onClick:e,style:{background:"none",border:"none",color:$,cursor:"pointer",padding:"3px 8px",fontSize:14}},n),ze=({onClose:e,children:n})=>React.createElement("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:500},onClick:e},React.createElement("div",{style:{background:te,border:`1px solid ${u}`,borderRadius:12,padding:22,overflowY:"auto"},onClick:o=>o.stopPropagation()},n)),ye={background:V,border:`1px solid ${u}`,color:G,borderRadius:7,padding:"7px 10px",fontSize:12,outline:"none"};return Ue(ct);})();

</script>
<script>
const App = BeeDooDispatch.default;
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(React.createElement(App));
</script>
</body>
</html>
