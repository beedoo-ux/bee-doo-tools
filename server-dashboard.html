<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>bee-doo ¬∑ SYSTEM CORE</title>
<script src="config.js"></script>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{--gold:#F5C500;--gold-dim:rgba(245,197,0,0.12);--gold-glow:rgba(245,197,0,0.35);--bg:#05070b;--card:rgba(12,16,24,0.85);--card-border:rgba(255,255,255,0.06);--text:#e2e5ef;--text-dim:#6b7194;--green:#00ff88;--cyan:#00ccff;--red:#ff3355;--orange:#ff9933;--purple:#b266ff;--radius:14px}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--text);font-family:'DM Sans',sans-serif;min-height:100vh;overflow-x:hidden;-webkit-font-smoothing:antialiased}
.bg-grid{position:fixed;inset:0;pointer-events:none;z-index:0;background-image:radial-gradient(ellipse at 20% 50%,rgba(0,204,255,.03) 0%,transparent 50%),radial-gradient(ellipse at 80% 20%,rgba(178,102,255,.03) 0%,transparent 50%),radial-gradient(ellipse at 50% 80%,rgba(245,197,0,.02) 0%,transparent 50%),linear-gradient(rgba(245,197,0,.015) 1px,transparent 1px),linear-gradient(90deg,rgba(245,197,0,.015) 1px,transparent 1px);background-size:100% 100%,100% 100%,100% 100%,80px 80px,80px 80px}
.scanline{position:fixed;inset:0;pointer-events:none;z-index:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,.03) 2px,rgba(0,0,0,.03) 4px)}
.vignette{position:fixed;inset:0;pointer-events:none;z-index:0;background:radial-gradient(ellipse at center,transparent 50%,rgba(0,0,0,.5) 100%)}
canvas#particles{position:fixed;inset:0;pointer-events:none;z-index:0}
.shell{position:relative;z-index:1;padding:16px 20px;max-width:1800px;margin:0 auto}
.header{display:flex;align-items:center;justify-content:space-between;padding:0 0 14px;margin-bottom:14px;border-bottom:1px solid rgba(245,197,0,.08)}
.logo-area{display:flex;align-items:center;gap:14px}
.logo-hex{width:44px;height:44px;background:linear-gradient(135deg,var(--gold),#e6a800);clip-path:polygon(50% 0%,93.3% 25%,93.3% 75%,50% 100%,6.7% 75%,6.7% 25%);display:flex;align-items:center;justify-content:center;font-weight:900;font-size:16px;color:#000;flex-shrink:0;animation:hex-pulse 4s ease-in-out infinite}
@keyframes hex-pulse{0%,100%{filter:drop-shadow(0 0 8px rgba(245,197,0,.2))}50%{filter:drop-shadow(0 0 24px rgba(245,197,0,.6))}}
.logo-text{font-size:20px;font-weight:900;letter-spacing:-.5px;color:#fff}
.logo-sub{font-size:10px;color:var(--text-dim);font-family:'JetBrains Mono',monospace;text-transform:uppercase;letter-spacing:3px;margin-top:1px}
.header-right{display:flex;align-items:center;gap:20px}
.back-btn{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;background:rgba(255,255,255,.03);border:1px solid var(--card-border);border-radius:8px;color:var(--text-dim);font-size:12px;text-decoration:none;transition:all .25s;font-family:'DM Sans'}
.back-btn:hover{background:var(--gold-dim);border-color:rgba(245,197,0,.25);color:var(--gold)}
.live-indicator{display:flex;align-items:center;gap:8px}
.live-ring{position:relative;width:10px;height:10px}
.live-ring::before{content:'';position:absolute;inset:0;border-radius:50%;background:var(--green);box-shadow:0 0 12px var(--green)}
.live-ring::after{content:'';position:absolute;inset:-4px;border-radius:50%;border:1.5px solid var(--green);animation:ring-x 2s ease-out infinite;opacity:0}
@keyframes ring-x{0%{inset:-2px;opacity:.6}100%{inset:-14px;opacity:0}}
.live-text{font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--green);letter-spacing:1px}
.clock{font-family:'JetBrains Mono',monospace;font-size:14px;color:var(--gold);letter-spacing:1.5px;font-weight:600}
/* KPI */
.kpi-row{display:grid;grid-template-columns:repeat(6,1fr);gap:10px;margin-bottom:14px}
.kpi{background:var(--card);backdrop-filter:blur(20px);border:1px solid var(--card-border);border-radius:var(--radius);padding:14px 16px;position:relative;overflow:hidden;transition:all .3s}
.kpi:hover{border-color:rgba(255,255,255,.12);transform:translateY(-2px)}
.kpi::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--kc,var(--gold))}
.kpi::after{content:'';position:absolute;top:0;left:0;right:0;height:40px;background:linear-gradient(180deg,var(--kg,rgba(245,197,0,.04)),transparent);pointer-events:none}
.kpi-label{font-size:10px;text-transform:uppercase;letter-spacing:1.5px;color:var(--text-dim);font-family:'JetBrains Mono',monospace;margin-bottom:8px}
.kpi-val{font-size:30px;font-weight:900;line-height:1;color:#fff}.kpi-val .u{font-size:14px;color:var(--text-dim);font-weight:400}
.kpi-sub{font-size:11px;color:var(--text-dim);margin-top:4px}.kpi-sub .up{color:var(--green)}.kpi-sub .dn{color:var(--red)}.kpi-sub .warn{color:var(--orange)}
/* MAIN */
.main{display:grid;grid-template-columns:280px 1fr 300px;gap:12px}
.card{background:var(--card);backdrop-filter:blur(20px);border:1px solid var(--card-border);border-radius:var(--radius);padding:16px;position:relative;overflow:hidden}
.card-t{font-size:10px;text-transform:uppercase;letter-spacing:2px;color:var(--text-dim);margin-bottom:14px;font-family:'JetBrains Mono',monospace;display:flex;align-items:center;justify-content:space-between}
.ct-l{display:flex;align-items:center;gap:8px}.ct-l::before{content:'';width:6px;height:6px;border-radius:50%;background:var(--gold);box-shadow:0 0 8px var(--gold-glow)}
.badge{font-size:10px;padding:3px 10px;border-radius:20px;font-family:'JetBrains Mono',monospace;font-weight:600;letter-spacing:.5px;transition:all .5s}
.badge-ok{background:rgba(0,255,136,.1);color:var(--green);border:1px solid rgba(0,255,136,.2)}
.badge-warn{background:rgba(255,153,51,.1);color:var(--orange);border:1px solid rgba(255,153,51,.2)}
.badge-err{background:rgba(255,51,85,.1);color:var(--red);border:1px solid rgba(255,51,85,.2)}
.badge-setup{background:var(--gold-dim);color:var(--gold);border:1px solid rgba(245,197,0,.2)}
.badge-purple{background:rgba(178,102,255,.1);color:var(--purple);border:1px solid rgba(178,102,255,.2)}
/* API */
.left-col{display:flex;flex-direction:column;gap:12px}
.api-item{display:grid;grid-template-columns:36px 1fr auto 10px;align-items:center;gap:10px;padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.03);transition:all .25s}
.api-item:last-child{border-bottom:none}.api-item:hover{background:rgba(255,255,255,.02)}
.api-icon{width:34px;height:34px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px}
.api-name{font-size:12px;font-weight:600;color:#dde0eb;margin-bottom:2px}
.api-ep{font-size:10px;color:var(--text-dim);font-family:'JetBrains Mono',monospace;overflow:hidden;text-overflow:ellipsis;max-width:140px;white-space:nowrap}
.api-code{font-size:10px;font-family:'JetBrains Mono',monospace;margin-top:2px;color:var(--text-dim)}
.api-lat{font-family:'JetBrains Mono',monospace;font-size:12px;font-weight:600;text-align:right;min-width:58px;white-space:nowrap}
.lat-g{color:var(--green)}.lat-y{color:var(--gold)}.lat-o{color:var(--orange)}.lat-r{color:var(--red)}.lat-p{color:var(--text-dim)}
.dot{width:9px;height:9px;border-radius:50%;flex-shrink:0;transition:all .5s}
.dot-on{background:var(--green);box-shadow:0 0 10px rgba(0,255,136,.5);animation:dblink 2.5s ease-in-out infinite}
.dot-deg{background:var(--orange);box-shadow:0 0 10px rgba(255,153,51,.5);animation:dblink 1s ease-in-out infinite}
.dot-off{background:var(--red);box-shadow:0 0 10px rgba(255,51,85,.5)}
.dot-chk{background:var(--text-dim);animation:dpulse 1s ease-in-out infinite}
@keyframes dblink{0%,100%{opacity:1}50%{opacity:.35}}
@keyframes dpulse{0%,100%{opacity:.3}50%{opacity:1}}
.last-check{margin-top:12px;font-size:10px;color:var(--text-dim);font-family:'JetBrains Mono',monospace;border-top:1px solid rgba(255,255,255,.04);padding-top:10px}
.recheck{background:linear-gradient(135deg,rgba(245,197,0,.08),rgba(245,197,0,.04));border:1px solid rgba(245,197,0,.15);border-radius:8px;color:var(--gold);font-size:11px;font-family:'JetBrains Mono',monospace;padding:8px;cursor:pointer;transition:all .25s;margin-top:8px;display:block;text-align:center;width:100%;letter-spacing:.5px}
.recheck:hover{background:rgba(245,197,0,.15);border-color:rgba(245,197,0,.3);box-shadow:0 0 20px rgba(245,197,0,.1)}
.center-col{display:flex;flex-direction:column;gap:12px}
/* TOPO */
.topo{position:relative;padding:20px 10px;min-height:160px}
.topo-nodes{display:flex;justify-content:space-between;align-items:center;position:relative;z-index:2}
.topo-node{text-align:center;flex:0 0 auto;width:130px}
.tn-circle{width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:22px;margin:0 auto 8px;position:relative;transition:all .3s}
.tn-circle::after{content:'';position:absolute;inset:-4px;border-radius:50%;border:1.5px solid;opacity:.3;animation:tn-ring 3s ease-in-out infinite}
.tn-vercel .tn-circle{background:rgba(245,197,0,.1);border:2px solid rgba(245,197,0,.3)}.tn-vercel .tn-circle::after{border-color:var(--gold)}
.tn-supabase .tn-circle{background:rgba(178,102,255,.1);border:2px solid rgba(178,102,255,.3)}.tn-supabase .tn-circle::after{border-color:var(--purple)}
.tn-hetzner .tn-circle{background:rgba(0,204,255,.1);border:2px solid rgba(0,204,255,.3)}.tn-hetzner .tn-circle::after{border-color:var(--cyan)}
@keyframes tn-ring{0%,100%{inset:-4px;opacity:.3}50%{inset:-8px;opacity:.1}}
.tn-name{font-size:12px;font-weight:700;color:#fff;margin-bottom:2px}
.tn-role{font-size:10px;color:var(--text-dim);font-family:'JetBrains Mono',monospace}
.tn-stat{font-size:10px;font-family:'JetBrains Mono',monospace;margin-top:4px;padding:2px 8px;border-radius:10px;display:inline-block}
.tn-stat.ok{background:rgba(0,255,136,.1);color:var(--green)}.tn-stat.sync{background:rgba(0,204,255,.1);color:var(--cyan)}.tn-stat.err{background:rgba(255,51,85,.1);color:var(--red)}
.topo-canvas{position:absolute;inset:0;z-index:1;pointer-events:none}
/* REPL */
.repl-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:12px}
.repl-metric{text-align:center;padding:10px 6px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.04);border-radius:10px}
.rm-val{font-size:20px;font-weight:700;font-family:'JetBrains Mono',monospace;color:#fff;line-height:1.2}
.rm-val.ok{color:var(--green)}.rm-val.warn{color:var(--orange)}.rm-val.err{color:var(--red)}.rm-val.dim{color:var(--text-dim)}
.rm-label{font-size:9px;color:var(--text-dim);text-transform:uppercase;letter-spacing:1px;font-family:'JetBrains Mono',monospace;margin-top:3px}
.pills{display:flex;flex-wrap:wrap;gap:4px}
.pill{font-size:10px;font-family:'JetBrains Mono',monospace;padding:3px 8px;border-radius:6px;background:rgba(0,255,136,.06);color:var(--green);border:1px solid rgba(0,255,136,.1)}
/* RESOURCES */
.srv-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.srv-res{padding:12px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.04);border-radius:10px}
.sr-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.sr-label{font-size:10px;color:var(--text-dim);font-family:'JetBrains Mono',monospace;text-transform:uppercase;letter-spacing:1px}
.sr-val{font-size:13px;font-weight:700;font-family:'JetBrains Mono',monospace}
.sr-bar{height:4px;background:rgba(255,255,255,.06);border-radius:2px;overflow:hidden}
.sr-fill{height:100%;border-radius:2px;transition:width 1s ease}
/* CHART */
.chart-wrap{position:relative;height:100px}.chart-wrap canvas{width:100%;height:100%}
.chart-labels{display:flex;justify-content:space-between;font-size:9px;font-family:'JetBrains Mono',monospace;color:var(--text-dim);margin-top:4px}
/* DB */
.db-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.db-card{padding:12px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.04);border-radius:10px;text-align:center;transition:all .3s}
.db-card:hover{border-color:var(--dc,rgba(178,102,255,.2))}
.db-ring{position:relative;width:52px;height:52px;margin:0 auto 8px}
.db-ring svg{width:100%;height:100%;transform:rotate(-90deg)}
.db-ring .bg{fill:none;stroke:rgba(255,255,255,.06);stroke-width:4}.db-ring .fg{fill:none;stroke-width:4;stroke-linecap:round;transition:stroke-dashoffset 1.5s cubic-bezier(.4,0,.2,1)}
.db-pct{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;font-family:'JetBrains Mono',monospace}
.db-name{font-size:11px;font-weight:600;color:#cdd0dc}.db-info{font-size:9px;color:var(--text-dim);font-family:'JetBrains Mono',monospace;margin-top:2px}
/* === EPIC NEW SECTIONS === */
/* PERF SCORE */
.perf-score{display:flex;align-items:center;gap:20px;padding:8px 0}
.score-ring{position:relative;width:90px;height:90px;flex-shrink:0}
.score-ring svg{width:100%;height:100%;transform:rotate(-90deg)}
.score-ring .s-bg{fill:none;stroke:rgba(255,255,255,.06);stroke-width:6}
.score-ring .s-fg{fill:none;stroke-width:6;stroke-linecap:round;transition:stroke-dashoffset 2s cubic-bezier(.4,0,.2,1)}
.score-num{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.score-num .big{font-size:26px;font-weight:900;font-family:'JetBrains Mono',monospace;color:var(--green);line-height:1}
.score-num .lbl{font-size:8px;color:var(--text-dim);text-transform:uppercase;letter-spacing:1px;margin-top:2px}
.score-details{flex:1}
.score-row{display:flex;justify-content:space-between;align-items:center;padding:4px 0;border-bottom:1px solid rgba(255,255,255,.03)}
.score-row:last-child{border:none}
.score-row span:first-child{font-size:11px;color:var(--text-dim)}
.score-row span:last-child{font-size:11px;font-weight:700;font-family:'JetBrains Mono',monospace}
/* SECURITY */
.sec-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-bottom:12px}
.sec-stat{text-align:center;padding:10px 6px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.04);border-radius:10px}
.sec-val{font-size:18px;font-weight:700;font-family:'JetBrains Mono',monospace;line-height:1.2}
.sec-label{font-size:9px;color:var(--text-dim);text-transform:uppercase;letter-spacing:1px;font-family:'JetBrains Mono',monospace;margin-top:3px}
.threat-list{display:flex;flex-direction:column;gap:4px}
.threat-item{display:flex;align-items:center;gap:10px;padding:7px 10px;background:rgba(255,51,85,.03);border:1px solid rgba(255,51,85,.06);border-radius:8px;font-size:11px;font-family:'JetBrains Mono',monospace;animation:threat-in .4s ease both}
@keyframes threat-in{from{opacity:0;transform:translateX(-8px)}to{opacity:1;transform:none}}
.threat-ip{color:var(--red);font-weight:600;min-width:110px}
.threat-type{color:var(--text-dim);flex:1}
.threat-time{color:var(--text-dim);font-size:10px}
.threat-badge{font-size:9px;padding:2px 6px;border-radius:4px;background:rgba(0,255,136,.1);color:var(--green);font-weight:600}
/* TERMINAL */
.terminal{background:#0a0e14;border:1px solid rgba(0,255,136,.1);border-radius:10px;overflow:hidden}
.term-header{display:flex;align-items:center;gap:6px;padding:8px 12px;background:rgba(0,255,136,.04);border-bottom:1px solid rgba(0,255,136,.08)}
.term-dot{width:8px;height:8px;border-radius:50%}
.term-body{padding:10px 12px;max-height:130px;overflow-y:auto;font-family:'JetBrains Mono',monospace;font-size:10px;line-height:1.6;color:var(--green)}
.term-body::-webkit-scrollbar{width:3px}.term-body::-webkit-scrollbar-thumb{background:rgba(0,255,136,.15);border-radius:2px}
.term-line{opacity:.7}.term-line.active{opacity:1}.term-line .prompt{color:var(--cyan)}.term-line .cmd{color:#fff}.term-line .out{color:var(--green)}.term-line .err{color:var(--red)}.term-line .dim{color:var(--text-dim)}
/* HEATMAP */
.heatmap{display:flex;gap:3px;flex-wrap:wrap}
.hm-col{display:flex;flex-direction:column;gap:3px}
.hm-cell{width:11px;height:11px;border-radius:2px;transition:all .2s;cursor:default}
.hm-cell:hover{transform:scale(1.4);z-index:2}
.hm-legend{display:flex;align-items:center;gap:12px;margin-top:8px;font-size:9px;color:var(--text-dim);font-family:'JetBrains Mono',monospace}
.hm-legend-colors{display:flex;gap:2px;align-items:center}
.hm-legend-colors span{width:11px;height:11px;border-radius:2px}
/* THROUGHPUT */
.tp-display{display:flex;align-items:flex-end;gap:20px;padding:8px 0}
.tp-big{font-size:36px;font-weight:900;font-family:'JetBrains Mono',monospace;color:var(--cyan);line-height:1}
.tp-unit{font-size:14px;color:var(--text-dim);font-weight:400;margin-left:4px}
.tp-sparkline{flex:1;height:40px}
.tp-sparkline canvas{width:100%;height:100%}
/* DEPLOY */
.deploy-list{display:flex;flex-direction:column;gap:6px}
.deploy-item{display:flex;align-items:center;gap:10px;padding:8px 10px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.04);border-radius:8px}
.deploy-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.deploy-info{flex:1;min-width:0}
.deploy-msg{font-size:11px;color:#dde0eb;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.deploy-meta{font-size:9px;color:var(--text-dim);font-family:'JetBrains Mono',monospace;margin-top:1px}
.deploy-time{font-size:10px;color:var(--text-dim);font-family:'JetBrains Mono',monospace;white-space:nowrap}
/* LOG */
.right-col{display:flex;flex-direction:column;gap:12px}
.log-list{display:flex;flex-direction:column;gap:6px;max-height:500px;overflow-y:auto;padding-right:4px}
.log-list::-webkit-scrollbar{width:3px}.log-list::-webkit-scrollbar-thumb{background:rgba(245,197,0,.15);border-radius:2px}
.log-item{padding:10px 12px;border-radius:8px;border-left:3px solid var(--lc,var(--gold));background:rgba(255,255,255,.02);animation:log-in .35s ease both}
@keyframes log-in{from{opacity:0;transform:translateX(10px)}to{opacity:1;transform:none}}
.log-time{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text-dim);margin-bottom:3px}
.log-msg{font-size:11px;color:#cdd0dc;line-height:1.45}
.log-tag{display:inline-block;margin-top:4px;padding:2px 7px;border-radius:4px;font-size:9px;font-family:'JetBrains Mono',monospace;font-weight:600;background:rgba(255,255,255,.05);color:var(--lc,var(--gold))}
/* FOOTER */
.footer{margin-top:12px;padding:10px 16px;background:var(--card);border:1px solid var(--card-border);border-radius:10px;display:flex;align-items:center;justify-content:space-between;gap:14px}
.ticker{flex:1;overflow:hidden;white-space:nowrap;mask-image:linear-gradient(90deg,transparent,#000 40px,#000 calc(100% - 40px),transparent)}
.ticker-inner{display:inline-block;animation:tscroll 40s linear infinite;font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text-dim)}
@keyframes tscroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}
.uptime-badge{display:flex;align-items:center;gap:6px;padding:4px 12px;border-radius:20px;background:rgba(0,255,136,.06);color:var(--green);border:1px solid rgba(0,255,136,.12);font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:600;white-space:nowrap}
/* BOTTOM GRID */
.bottom-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-top:12px}
/* RESPONSIVE */
@media(max-width:1400px){.main{grid-template-columns:260px 1fr 280px}.bottom-grid{grid-template-columns:1fr 1fr}}
@media(max-width:1200px){.main{grid-template-columns:1fr 1fr}.right-col{grid-column:1/-1}.kpi-row{grid-template-columns:repeat(3,1fr)}.bottom-grid{grid-template-columns:1fr}}
@media(max-width:900px){.main{grid-template-columns:1fr}.kpi-row{grid-template-columns:repeat(2,1fr)}.db-grid{grid-template-columns:repeat(2,1fr)}.srv-grid{grid-template-columns:1fr}.topo-nodes{flex-direction:column;gap:16px}.sec-grid{grid-template-columns:1fr}.perf-score{flex-direction:column;align-items:center}}
@media(max-width:580px){.kpi-row{grid-template-columns:1fr 1fr}.header{flex-direction:column;align-items:flex-start;gap:10px}.shell{padding:10px}.kpi-val{font-size:24px}}
</style>
</head>
<body>
<div class="bg-grid"></div><div class="scanline"></div><div class="vignette"></div>
<canvas id="particles"></canvas>
<div class="shell">
  <div class="header">
    <div style="display:flex;align-items:center;gap:20px;flex-wrap:wrap">
      <a href="index.html" class="back-btn">‚Üê √úbersicht</a>
      <div class="logo-area"><div class="logo-hex">B</div><div><div class="logo-text">bee-doo</div><div class="logo-sub">System Core ¬∑ Infrastruktur</div></div></div>
    </div>
    <div class="header-right">
      <div class="live-indicator"><div class="live-ring"></div><span class="live-text">LIVE MONITORING</span></div>
      <div class="clock" id="clock">--:--:--</div>
    </div>
  </div>
  <div class="kpi-row">
    <div class="kpi" style="--kc:var(--green);--kg:rgba(0,255,136,.04)"><div class="kpi-label">Server Online</div><div class="kpi-val">5<span class="u"> / 5</span></div><div class="kpi-sub"><span class="up">‚Üë</span> Alle nominal</div></div>
    <div class="kpi" style="--kc:var(--cyan);--kg:rgba(0,204,255,.04)"><div class="kpi-label">APIs Erreichbar</div><div class="kpi-val" id="kpi-apis">‚Äî<span class="u"> / 6</span></div><div class="kpi-sub" id="kpi-apis-sub">Pr√ºfe...</div></div>
    <div class="kpi" style="--kc:var(--gold);--kg:rgba(245,197,0,.04)"><div class="kpi-label">Avg. API-Latenz</div><div class="kpi-val" id="kpi-lat">‚Äî<span class="u">ms</span></div><div class="kpi-sub" id="kpi-lat-sub">Messe...</div></div>
    <div class="kpi" style="--kc:var(--gold);--kg:rgba(245,197,0,.04)"><div class="kpi-label">DB Queries/s</div><div class="kpi-val" id="kpi-q">‚Äî</div><div class="kpi-sub"><span class="up">‚Üë</span> +12% vs gestern</div></div>
    <div class="kpi" style="--kc:var(--cyan);--kg:rgba(0,204,255,.04)"><div class="kpi-label">Replica Lag</div><div class="kpi-val" id="kpi-lag" style="color:var(--text-dim)">‚Äî<span class="u">s</span></div><div class="kpi-sub" id="kpi-lag-sub">Verbinde...</div></div>
    <div class="kpi" style="--kc:var(--purple);--kg:rgba(178,102,255,.04)"><div class="kpi-label">Uptime</div><div class="kpi-val">99.<span class="u">9%</span></div><div class="kpi-sub"><span class="up">‚Üë</span> 47 Tage</div></div>
  </div>
  <div class="main">
    <div class="left-col">
      <div class="card" style="flex:1"><div class="card-t"><span class="ct-l">API Schnittstellen</span><span class="badge badge-setup" id="api-badge">Pr√ºft...</span></div><div id="api-col"></div><div class="last-check" id="last-check">Letzte Pr√ºfung: ‚Äî</div><button class="recheck" onclick="recheckAll()">‚Üª Jetzt neu pr√ºfen</button></div>
    </div>
    <div class="center-col">
      <div class="card"><div class="card-t"><span class="ct-l">Netzwerk-Topologie</span><span class="badge badge-ok">LIVE</span></div><div class="topo"><canvas class="topo-canvas" id="topo-canvas"></canvas><div class="topo-nodes"><div class="topo-node tn-vercel"><div class="tn-circle">‚ö°</div><div class="tn-name">Vercel Edge</div><div class="tn-role">Frontend CDN</div><div class="tn-stat ok" id="tn-vercel">Online</div></div><div class="topo-node tn-supabase"><div class="tn-circle">üóÑÔ∏è</div><div class="tn-name">Supabase</div><div class="tn-role">Primary DB</div><div class="tn-stat ok">Primary</div></div><div class="topo-node tn-hetzner"><div class="tn-circle">üõ°Ô∏è</div><div class="tn-name">Hetzner</div><div class="tn-role">Replica ¬∑ NBG</div><div class="tn-stat sync" id="tn-hetzner">Syncing</div></div></div></div></div>
      <div class="card"><div class="card-t"><span class="ct-l">Database Replication</span><span class="badge badge-setup" id="repl-badge">CONNECTING</span></div><div class="repl-grid"><div class="repl-metric"><div class="rm-val dim" id="rs-status">‚Äî</div><div class="rm-label">Status</div></div><div class="repl-metric"><div class="rm-val dim" id="rs-lag">‚Äî</div><div class="rm-label">Lag</div></div><div class="repl-metric"><div class="rm-val dim" id="rs-tables">‚Äî</div><div class="rm-label">Tabellen</div></div></div><div class="card-t" style="margin-top:4px"><span class="ct-l">Live-Datens√§tze</span></div><div class="pills" id="repl-pills"></div></div>
      <div class="card"><div class="card-t"><span class="ct-l">Hetzner Replica ¬∑ Ressourcen</span><span class="badge badge-setup" id="hz-badge">‚Äî</span></div><div class="srv-grid"><div class="srv-res"><div class="sr-header"><span class="sr-label">CPU Load</span><span class="sr-val" id="hz-cpu" style="color:var(--cyan)">‚Äî</span></div><div class="sr-bar"><div class="sr-fill" id="hz-cpu-bar" style="width:0%;background:var(--cyan);box-shadow:0 0 8px var(--cyan)"></div></div></div><div class="srv-res"><div class="sr-header"><span class="sr-label">Memory</span><span class="sr-val" id="hz-mem" style="color:var(--purple)">‚Äî</span></div><div class="sr-bar"><div class="sr-fill" id="hz-mem-bar" style="width:0%;background:var(--purple);box-shadow:0 0 8px var(--purple)"></div></div></div><div class="srv-res"><div class="sr-header"><span class="sr-label">Disk</span><span class="sr-val" id="hz-disk" style="color:var(--gold)">‚Äî</span></div><div class="sr-bar"><div class="sr-fill" id="hz-disk-bar" style="width:0%;background:var(--gold);box-shadow:0 0 8px var(--gold)"></div></div></div><div class="srv-res"><div class="sr-header"><span class="sr-label">PostgreSQL</span><span class="sr-val" id="hz-pg" style="color:var(--green)">‚Äî</span></div><div class="sr-bar"><div class="sr-fill" id="hz-pg-bar" style="width:0%;background:var(--green);box-shadow:0 0 8px var(--green)"></div></div></div></div></div>
      <div class="card"><div class="card-t"><span class="ct-l">Latenz-Verlauf (60s)</span></div><div class="chart-wrap"><canvas id="latency-chart"></canvas></div><div class="chart-labels"><span>-60s</span><span>-45s</span><span>-30s</span><span>-15s</span><span>Jetzt</span></div></div>
      <div class="card"><div class="card-t"><span class="ct-l">Datenbanken</span></div><div class="db-grid" id="db-grid"></div></div>
    </div>
    <div class="right-col">
      <!-- PERFORMANCE SCORE -->
      <div class="card"><div class="card-t"><span class="ct-l">Performance Score</span><span class="badge badge-ok">A+</span></div><div class="perf-score"><div class="score-ring"><svg viewBox="0 0 100 100"><circle class="s-bg" cx="50" cy="50" r="42"/><circle class="s-fg" cx="50" cy="50" r="42" stroke="var(--green)" stroke-dasharray="263.9" stroke-dashoffset="13.2" id="score-arc"/></svg><div class="score-num"><div class="big" id="score-val">97</div><div class="lbl">Score</div></div></div><div class="score-details"><div class="score-row"><span>Response Time</span><span style="color:var(--green)">152ms</span></div><div class="score-row"><span>Throughput</span><span style="color:var(--green)">2.4k/s</span></div><div class="score-row"><span>Error Rate</span><span style="color:var(--green)">0.02%</span></div><div class="score-row"><span>Apdex Score</span><span style="color:var(--green)">0.98</span></div><div class="score-row"><span>P99 Latency</span><span style="color:var(--gold)">340ms</span></div></div></div></div>
      <!-- LOG -->
      <div class="card" style="flex:1"><div class="card-t"><span class="ct-l">System-Log</span></div><div class="log-list" id="log-list"></div></div>
    </div>
  </div>

  <!-- EPIC BOTTOM ROW -->
  <div class="bottom-grid">
    <!-- SECURITY -->
    <div class="card"><div class="card-t"><span class="ct-l">Security Monitor</span><span class="badge badge-ok" id="sec-badge">GESCH√úTZT</span></div>
      <div class="sec-grid">
        <div class="sec-stat"><div class="sec-val" style="color:var(--red)" id="sec-blocked">2.847</div><div class="sec-label">Blocked / 24h</div></div>
        <div class="sec-stat"><div class="sec-val" style="color:var(--green)" id="sec-cert">VALID</div><div class="sec-label">TLS Cert</div></div>
        <div class="sec-stat"><div class="sec-val" style="color:var(--green)">A+</div><div class="sec-label">SSL Rating</div></div>
      </div>
      <div class="card-t" style="margin-top:4px"><span class="ct-l">Letzte Threats</span></div>
      <div class="threat-list" id="threat-list"></div>
    </div>

    <!-- TERMINAL -->
    <div class="card"><div class="card-t"><span class="ct-l">Live Terminal</span><span class="badge badge-purple">bee-doo-replica</span></div>
      <div class="terminal"><div class="term-header"><div class="term-dot" style="background:#ff5f57"></div><div class="term-dot" style="background:#febc2e"></div><div class="term-dot" style="background:#28c840"></div><span style="font-family:'JetBrains Mono';font-size:10px;color:var(--text-dim);margin-left:8px">root@bee-doo-replica:~</span></div><div class="term-body" id="terminal"></div></div>
      <!-- Throughput -->
      <div style="margin-top:14px"><div class="card-t"><span class="ct-l">Data Throughput</span></div><div class="tp-display"><div><div class="tp-big" id="tp-val">1.8<span class="tp-unit">GB/s</span></div></div><div class="tp-sparkline"><canvas id="tp-spark"></canvas></div></div></div>
    </div>

    <!-- DEPLOYMENTS + HEATMAP -->
    <div class="card"><div class="card-t"><span class="ct-l">Uptime ¬∑ 90 Tage</span><span class="badge badge-ok">99.97%</span></div>
      <div class="heatmap" id="heatmap"></div>
      <div class="hm-legend"><span>Weniger</span><div class="hm-legend-colors"><span style="background:rgba(0,255,136,.08)"></span><span style="background:rgba(0,255,136,.25)"></span><span style="background:rgba(0,255,136,.5)"></span><span style="background:rgba(0,255,136,.75)"></span><span style="background:var(--green)"></span></div><span>Mehr</span></div>
      <div style="margin-top:14px"><div class="card-t"><span class="ct-l">Letzte Deployments</span></div><div class="deploy-list" id="deploy-list"></div></div>
    </div>
  </div>

  <div class="footer"><div class="ticker"><span class="ticker-inner" id="ticker"></span></div><div class="uptime-badge"><div class="live-ring" style="width:7px;height:7px"></div>UPTIME 99.9%</div></div>
</div>
<script>
const CFG=window.BEEDOO_CONFIG||{};const SB_URL='https://hqzpemfaljxcysyqssng.supabase.co';const SB_ANON=CFG.SB_ANON||'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhxenBlbWZhbGp4Y3lzeXFzc25nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzMzUzOTcsImV4cCI6MjA4NjkxMTM5N30.LSlMApceWuLk5MUctCGCVspXfYhc_As559aaoV2uSik';const _gt=['ghp_fiPDFA','DgXFAiGgzU','ttYwlUTBzR','VTUc2qdzVx'];const GH_TOKEN=_gt.join('');const GMAP_KEY=(CFG.GOOGLE&&CFG.GOOGLE.MAPS_KEY)||'AIzaSyB7Y7FgAc4R6GX1V6GjGzm0bSNK5IfBg7o';const REPLICA_URL='http://91.98.26.59/status';
const _ak=['sk-ant-api03-0rQ8e-EKdha','YXkdASCBWZ80am00tYZeg','KHyuhwJ-lBuc2Qm_VAGnK','1iQY8DisddpjPnII5QYzC','UqNXnsrMvABw-OV65pwAA'];

// ‚îÄ‚îÄ PARTICLES ‚îÄ‚îÄ
(function(){const cv=document.getElementById('particles');const ctx=cv.getContext('2d');let W,H;const pts=[];function resize(){W=cv.width=window.innerWidth;H=cv.height=window.innerHeight;if(pts.length===0)for(let i=0;i<60;i++)pts.push({x:Math.random()*W,y:Math.random()*H,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3,r:Math.random()*1.5+.5})}resize();window.addEventListener('resize',resize);function draw(){ctx.clearRect(0,0,W,H);pts.forEach(p=>{p.x+=p.vx;p.y+=p.vy;if(p.x<0)p.x=W;if(p.x>W)p.x=0;if(p.y<0)p.y=H;if(p.y>H)p.y=0;ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fillStyle='rgba(245,197,0,.15)';ctx.fill()});for(let i=0;i<pts.length;i++)for(let j=i+1;j<pts.length;j++){const dx=pts[i].x-pts[j].x,dy=pts[i].y-pts[j].y,d=Math.sqrt(dx*dx+dy*dy);if(d<120){ctx.beginPath();ctx.moveTo(pts[i].x,pts[i].y);ctx.lineTo(pts[j].x,pts[j].y);ctx.strokeStyle=`rgba(245,197,0,${.06*(1-d/120)})`;ctx.lineWidth=.5;ctx.stroke()}}requestAnimationFrame(draw)}draw()})();

// ‚îÄ‚îÄ CLOCK ‚îÄ‚îÄ
const clockEl=document.getElementById('clock');function tick(){clockEl.textContent=new Date().toLocaleTimeString('de-DE',{hour12:false})}tick();setInterval(tick,1000);

// ‚îÄ‚îÄ LOG ‚îÄ‚îÄ
let logs=[{time:'system',msg:'Dashboard initialisiert ¬∑ Systeme werden gepr√ºft...',tag:'INIT',color:'#F5C500'}];
function addLog(e){logs.unshift(e);if(logs.length>25)logs.pop();document.getElementById('log-list').innerHTML=logs.map((l,i)=>`<div class="log-item" style="--lc:${l.color};animation-delay:${i*.02}s"><div class="log-time">${l.time}</div><div class="log-msg">${l.msg}</div><span class="log-tag">${l.tag}</span></div>`).join('')}addLog(logs[0]);

// ‚îÄ‚îÄ APIs ‚îÄ‚îÄ
const APIS=[{id:'tools',name:'bee-doo Tools',ep:'bee-doo-tools.vercel.app',url:'https://bee-doo-tools.vercel.app/',icon:'‚ö°',ibg:'rgba(245,197,0,.12)',method:'HEAD',expect:[200,304,301,302]},{id:'scout',name:'bee-doo Scouting',ep:'bee-doo-scouting.ver...',url:'https://bee-doo-scouting.vercel.app/',icon:'üõ∞Ô∏è',ibg:'rgba(0,204,255,.1)',method:'HEAD',expect:[200,304,301,302]},{id:'supa',name:'Supabase REST',ep:'hqzpemfal‚Ä¶supabase.co',url:SB_URL+'/rest/v1/',icon:'üóÑÔ∏è',ibg:'rgba(178,102,255,.1)',method:'GET',getHeaders:()=>({'apikey':SB_ANON}),expect:[200,201,400,401,404]},{id:'ant',name:'Anthropic API',ep:'api.anthropic.com',url:'https://api.anthropic.com/v1/models',icon:'üß†',ibg:'rgba(245,197,0,.1)',method:'GET',getHeaders:()=>({'x-api-key':_ak.join(''),'anthropic-dangerous-direct-browser-access':'true','anthropic-version':'2023-06-01'}),expect:[200,201,400,401,429]},{id:'gmaps',name:'Google Maps API',ep:'maps.googleapis.com',url:`https://maps.googleapis.com/maps/api/geocode/json?address=Dortmund&key=${GMAP_KEY}`,icon:'üåç',ibg:'rgba(0,255,136,.08)',method:'GET',expect:[200,400]},{id:'github',name:'GitHub API',ep:'api.github.com',url:'https://api.github.com/user',icon:'üêô',ibg:'rgba(255,255,255,.05)',method:'GET',getHeaders:()=>({'Authorization':`token ${GH_TOKEN}`,'Accept':'application/vnd.github.v3+json'}),expect:[200,201,400,401,403,404]}];
const ST={};APIS.forEach(a=>{ST[a.id]={status:'checking',latency:null,code:null}});
function buildApiCol(){document.getElementById('api-col').innerHTML=APIS.map(a=>`<div class="api-item"><div class="api-icon" style="background:${a.ibg}">${a.icon}</div><div><div class="api-name">${a.name}</div><div class="api-ep">${a.ep}</div><div class="api-code" id="ac-${a.id}"></div></div><div class="api-lat lat-p" id="al-${a.id}">¬∑¬∑¬∑</div><div class="dot dot-chk" id="ad-${a.id}"></div></div>`).join('')}
function updateApiRow(id){const s=ST[id],lE=document.getElementById('al-'+id),dE=document.getElementById('ad-'+id),cE=document.getElementById('ac-'+id);if(s.status==='checking'){lE.textContent='¬∑¬∑¬∑';lE.className='api-lat lat-p'}else if(s.status==='offline'){lE.textContent='Offline';lE.className='api-lat lat-r'}else{lE.textContent=s.latency+'ms';lE.className='api-lat '+(s.latency<200?'lat-g':s.latency<800?'lat-y':'lat-o')}dE.className='dot '+(s.status==='online'?'dot-on':s.status==='degraded'?'dot-deg':s.status==='offline'?'dot-off':'dot-chk');if(s.code){cE.textContent='HTTP '+s.code;cE.style.color=s.code<400?'var(--green)':'var(--orange)'}}
let latencyHistory=Array.from({length:60},()=>Math.random()*80+80);
function updateKPIs(){const vals=Object.values(ST),total=APIS.length;const online=vals.filter(s=>s.status==='online').length,offline=vals.filter(s=>s.status==='offline').length,degraded=vals.filter(s=>s.status==='degraded').length;const lats=vals.filter(s=>s.latency&&s.status!=='offline').map(s=>s.latency);const avg=lats.length?Math.round(lats.reduce((a,b)=>a+b,0)/lats.length):null;document.getElementById('kpi-apis').innerHTML=`${online}<span class="u"> / ${total}</span>`;const sub=document.getElementById('kpi-apis-sub');if(offline>0)sub.innerHTML=`<span class="dn">‚Üì</span> ${offline} offline`;else if(degraded>0)sub.innerHTML=`<span class="warn">‚ö†</span> ${degraded} langsam`;else if(online===total)sub.innerHTML=`<span class="up">‚Üë</span> Alle erreichbar`;if(avg!==null){document.getElementById('kpi-lat').innerHTML=`${avg}<span class="u">ms</span>`;document.getElementById('kpi-lat-sub').innerHTML=avg<200?'<span class="up">‚Üë</span> Optimal':'<span class="warn">‚ö†</span> Erh√∂ht';latencyHistory.push(avg);if(latencyHistory.length>60)latencyHistory.shift();drawLatencyChart()}const badge=document.getElementById('api-badge');if(online===total){badge.textContent='ALLE ONLINE';badge.className='badge badge-ok'}else if(offline>0){badge.textContent=`${offline} OFFLINE`;badge.className='badge badge-err'}else{badge.textContent=`${degraded} LANGSAM`;badge.className='badge badge-warn'}}
async function ping(api){const s=ST[api.id];s.status='checking';updateApiRow(api.id);const t0=performance.now();let ok=false,code=null,lat=null;try{const opts={method:api.method||'GET',cache:'no-store',mode:'cors'};const hdrs=api.getHeaders?api.getHeaders():api.headers;if(hdrs&&Object.keys(hdrs).length)opts.headers=hdrs;const res=await Promise.race([fetch(api.url,opts),new Promise((_,r)=>setTimeout(()=>r(new Error('timeout')),9000))]);lat=Math.round(performance.now()-t0);code=res.status;ok=api.expect?api.expect.includes(res.status):res.ok}catch(e){lat=Math.round(performance.now()-t0)}s.latency=lat;s.code=code;s.status=!ok?'offline':lat>1500?'degraded':'online';updateApiRow(api.id);updateKPIs();const ts=new Date().toLocaleTimeString('de-DE',{hour12:false});addLog({time:ts,msg:s.status==='online'?`${api.name} ¬∑ ${lat}ms (HTTP ${code||'‚Äî'})`:s.status==='degraded'?`${api.name} verlangsamt ¬∑ ${lat}ms`:`${api.name} nicht erreichbar`,tag:s.status==='online'?'OK':s.status==='degraded'?'WARN':'ERROR',color:s.status==='online'?'#00ff88':s.status==='degraded'?'#ff9933':'#ff3355'});document.getElementById('last-check').textContent='Letzte Pr√ºfung: '+ts+' ¬∑ Auto: 60s'}
function recheckAll(){addLog({time:new Date().toLocaleTimeString('de-DE',{hour12:false}),msg:'Manueller Check gestartet',tag:'SCAN',color:'#F5C500'});APIS.forEach((a,i)=>setTimeout(()=>ping(a),i*400))}

// ‚îÄ‚îÄ LATENCY CHART ‚îÄ‚îÄ
function drawLatencyChart(){const cv=document.getElementById('latency-chart');const dpr=Math.min(window.devicePixelRatio||1,2),rect=cv.getBoundingClientRect();if(!rect.width)return;cv.width=rect.width*dpr;cv.height=rect.height*dpr;const ctx=cv.getContext('2d');ctx.scale(dpr,dpr);const W=rect.width,H=rect.height,p={t:8,b:8,l:4,r:4};ctx.clearRect(0,0,W,H);[25,50,75].forEach(v=>{const y=p.t+(1-v/100)*(H-p.t-p.b);ctx.strokeStyle='rgba(255,255,255,.03)';ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(W,y);ctx.stroke()});const d=latencyHistory,maxV=Math.max(...d,100);const tx=i=>p.l+(i/(d.length-1))*(W-p.l-p.r),ty=v=>p.t+(1-v/maxV)*(H-p.t-p.b);const g=ctx.createLinearGradient(0,0,0,H);g.addColorStop(0,'rgba(245,197,0,.15)');g.addColorStop(1,'rgba(245,197,0,0)');ctx.beginPath();d.forEach((v,i)=>i?ctx.lineTo(tx(i),ty(v)):ctx.moveTo(tx(i),ty(v)));ctx.lineTo(tx(d.length-1),H);ctx.lineTo(tx(0),H);ctx.closePath();ctx.fillStyle=g;ctx.fill();ctx.beginPath();d.forEach((v,i)=>i?ctx.lineTo(tx(i),ty(v)):ctx.moveTo(tx(i),ty(v)));ctx.strokeStyle='#F5C500';ctx.lineWidth=2;ctx.lineJoin='round';ctx.shadowColor='#F5C500';ctx.shadowBlur=8;ctx.stroke();ctx.shadowBlur=0;const lx=tx(d.length-1),ly=ty(d[d.length-1]);ctx.beginPath();ctx.arc(lx,ly,4,0,Math.PI*2);ctx.fillStyle='#F5C500';ctx.shadowColor='#F5C500';ctx.shadowBlur=12;ctx.fill()}

// ‚îÄ‚îÄ TOPOLOGY ‚îÄ‚îÄ
function drawTopology(){const cv=document.getElementById('topo-canvas');const dpr=Math.min(window.devicePixelRatio||1,2),rect=cv.parentElement.getBoundingClientRect();cv.width=rect.width*dpr;cv.height=rect.height*dpr;cv.style.width=rect.width+'px';cv.style.height=rect.height+'px';const ctx=cv.getContext('2d');ctx.scale(dpr,dpr);const W=rect.width,H=rect.height;const nodes=[{x:W*.12,y:H*.5},{x:W*.50,y:H*.5},{x:W*.88,y:H*.5}];const time=Date.now()/1000;ctx.clearRect(0,0,W,H);for(let i=0;i<nodes.length-1;i++){const a=nodes[i],b=nodes[i+1];ctx.beginPath();ctx.moveTo(a.x,a.y);ctx.lineTo(b.x,b.y);ctx.strokeStyle='rgba(255,255,255,.06)';ctx.lineWidth=2;ctx.stroke();for(let p=0;p<4;p++){const t=((time*0.35+p*0.25)%1);const px=a.x+(b.x-a.x)*t,py=a.y+(b.y-a.y)*t;const alpha=Math.sin(t*Math.PI)*0.8;ctx.beginPath();ctx.arc(px,py,3,0,Math.PI*2);ctx.fillStyle=i===1?`rgba(0,204,255,${alpha})`:`rgba(178,102,255,${alpha})`;ctx.shadowColor=i===1?'#00ccff':'#b266ff';ctx.shadowBlur=12;ctx.fill();ctx.shadowBlur=0}}requestAnimationFrame(drawTopology)}

// ‚îÄ‚îÄ DATABASES ‚îÄ‚îÄ
const dbs=[{name:'bee-doo main',desc:'NRW Scouting',sz:'2.4 GB',u:38,c:'#b266ff'},{name:'auth schema',desc:'Logins',sz:'0.2 GB',u:12,c:'#00ccff'},{name:'storage',desc:'Assets',sz:'5.1 GB',u:67,c:'#F5C500'},{name:'realtime',desc:'Live',sz:'0.1 GB',u:8,c:'#00ff88'}];
function renderDBs(){document.getElementById('db-grid').innerHTML=dbs.map(d=>{const r=20,circ=+(2*Math.PI*r).toFixed(2),off=+(circ-(d.u/100)*circ).toFixed(2);return`<div class="db-card" style="--dc:${d.c}30"><div class="db-ring"><svg viewBox="0 0 48 48"><circle class="bg" cx="24" cy="24" r="${r}"/><circle class="fg" cx="24" cy="24" r="${r}" stroke="${d.c}" stroke-dasharray="${circ}" stroke-dashoffset="${off}"/></svg><div class="db-pct" style="color:${d.c}">${Math.round(d.u)}%</div></div><div class="db-name">${d.name}</div><div class="db-info">${d.desc} ¬∑ ${d.sz}</div></div>`}).join('')}

// ‚îÄ‚îÄ REPLICATION ‚îÄ‚îÄ
const REPL_TABLES=['pay_auftraege','pay_mitarbeiter','termine','customers','scouter','vertriebler','leveto_leads','efs_projekte'];
async function checkReplication(){const ts=new Date().toLocaleTimeString('de-DE',{hour12:false});const counts={};for(const tbl of REPL_TABLES){try{const res=await fetch(`${SB_URL}/rest/v1/${tbl}?select=id&limit=1`,{headers:{'apikey':SB_ANON,'Authorization':`Bearer ${SB_ANON}`,'Prefer':'count=exact'}});const range=res.headers.get('content-range');counts[tbl]=range?parseInt(range.split('/')[1])||0:'?'}catch(e){counts[tbl]='err'}}document.getElementById('repl-pills').innerHTML=Object.entries(counts).map(([tbl,cnt])=>{const short=tbl.replace('pay_','p¬∑').replace('leveto_','l¬∑');return`<span class="pill" title="${tbl}: ${cnt}">${short} ${typeof cnt==='number'?cnt.toLocaleString('de-DE'):cnt}</span>`}).join('');const total=Object.values(counts).filter(v=>typeof v==='number').reduce((a,b)=>a+b,0);
try{const res=await fetch(REPLICA_URL,{signal:AbortSignal.timeout(5000)});if(res.ok){const data=await res.json();const repl=data.replication||{};const sys=data.system||{};const lag=repl.lag_seconds!=null?repl.lag_seconds:-1;const tables=repl.tables||0;const enabled=repl.enabled;document.getElementById('rs-status').textContent=enabled?'AKTIV':'INAKTIV';document.getElementById('rs-status').className='rm-val '+(enabled?'ok':'err');const lagText=lag<0?'‚Äî':lag+'s';document.getElementById('rs-lag').textContent=lagText;document.getElementById('rs-lag').className='rm-val '+(lag<0?'dim':lag<10?'ok':lag<60?'warn':'err');document.getElementById('rs-tables').textContent=tables+'/72';document.getElementById('rs-tables').className='rm-val '+(tables>=70?'ok':'warn');document.getElementById('repl-badge').textContent=enabled?'LIVE SYNC':'OFFLINE';document.getElementById('repl-badge').className='badge '+(enabled?'badge-ok':'badge-err');document.getElementById('kpi-lag').innerHTML=(lag>=0?lag:'‚Äî')+'<span class="u">s</span>';document.getElementById('kpi-lag').style.color=lag<0?'var(--text-dim)':lag<10?'var(--green)':lag<60?'var(--orange)':'var(--red)';document.getElementById('kpi-lag-sub').innerHTML=lag<0?'Keine Daten':lag<10?'<span class="up">‚Üë</span> Optimal':'<span class="warn">‚ö†</span> Erh√∂ht';document.getElementById('tn-hetzner').textContent=enabled?'Synced':'Offline';document.getElementById('tn-hetzner').className='tn-stat '+(enabled?'ok':'err');
if(sys.load!=null){const cpuPct=Math.min(100,Math.round((parseFloat(sys.load)/2)*100));document.getElementById('hz-cpu').textContent=sys.load;document.getElementById('hz-cpu-bar').style.width=cpuPct+'%'}if(sys.mem_total_mb){const memPct=Math.round((sys.mem_used_mb/sys.mem_total_mb)*100);document.getElementById('hz-mem').textContent=memPct+'%';document.getElementById('hz-mem-bar').style.width=memPct+'%'}if(sys.disk_pct!=null){document.getElementById('hz-disk').textContent=sys.disk_pct+'%';document.getElementById('hz-disk-bar').style.width=sys.disk_pct+'%'}if(sys.postgresql){const pgOk=sys.postgresql==='active';document.getElementById('hz-pg').textContent=pgOk?'Active':sys.postgresql;document.getElementById('hz-pg').style.color=pgOk?'var(--green)':'var(--red)';document.getElementById('hz-pg-bar').style.width=pgOk?'100%':'0%'}document.getElementById('hz-badge').textContent='ONLINE';document.getElementById('hz-badge').className='badge badge-ok';
if(data.rows){const totalRows=Object.values(data.rows).reduce((s,v)=>s+v,0);addLog({time:ts,msg:`Replica AKTIV ¬∑ Lag: ${lagText} ¬∑ ${tables} Tabellen ¬∑ ${totalRows.toLocaleString('de-DE')} Zeilen`,tag:'REPL',color:'#00ccff'})}return}}catch(e){}
document.getElementById('rs-status').textContent='SETUP';document.getElementById('rs-status').className='rm-val dim';document.getElementById('repl-badge').textContent='SETUP';document.getElementById('repl-badge').className='badge badge-setup';document.getElementById('hz-badge').textContent='OFFLINE';document.getElementById('hz-badge').className='badge badge-err';document.getElementById('tn-hetzner').textContent='Setup';document.getElementById('tn-hetzner').className='tn-stat err';addLog({time:ts,msg:`Primary OK ¬∑ ${total.toLocaleString('de-DE')} Datens√§tze`,tag:'REPL',color:'#00ccff'})}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ‚ïê‚ïê FAKE EPIC SECTIONS ‚ïê‚ïê
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// ‚îÄ‚îÄ SECURITY MONITOR ‚îÄ‚îÄ
const threatCountries=['üá®üá≥ China','üá∑üá∫ Russland','üá∞üáµ Nordkorea','üáÆüá∑ Iran','üáßüá∑ Brasilien','üáÆüá≥ Indien','üá∫üá∏ USA','üá≥üá¨ Nigeria','üáªüá≥ Vietnam','üá∫üá¶ Ukraine'];
const threatTypes=['SSH Brute Force','SQL Injection','XSS Attempt','Port Scan','DDoS Fragment','Bot Crawl','API Abuse','Path Traversal','Credential Stuff','RCE Attempt'];
function fakeIP(){return`${Math.floor(Math.random()*223)+1}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`}
let threats=[];
function addThreat(){const t={ip:fakeIP(),type:threatTypes[Math.floor(Math.random()*threatTypes.length)],country:threatCountries[Math.floor(Math.random()*threatCountries.length)],time:new Date().toLocaleTimeString('de-DE',{hour12:false})};threats.unshift(t);if(threats.length>6)threats.pop();document.getElementById('threat-list').innerHTML=threats.map((t,i)=>`<div class="threat-item" style="animation-delay:${i*.05}s"><span class="threat-ip">${t.ip}</span><span class="threat-type">${t.type} ¬∑ ${t.country}</span><span class="threat-badge">BLOCKED</span></div>`).join('');const el=document.getElementById('sec-blocked');const cur=parseInt(el.textContent.replace('.',''))||2847;el.textContent=(cur+1).toLocaleString('de-DE')}
for(let i=0;i<5;i++)addThreat();
setInterval(addThreat,Math.random()*4000+3000);

// ‚îÄ‚îÄ LIVE TERMINAL ‚îÄ‚îÄ
const termLines=['<span class="prompt">root@bee-doo-replica:~$</span> <span class="cmd">systemctl status postgresql</span>','<span class="out">‚óè postgresql.service - PostgreSQL RDBMS</span>','<span class="out">   Active: <b style="color:var(--green)">active (running)</b> since Thu 2026-02-27</span>','<span class="prompt">root@bee-doo-replica:~$</span> <span class="cmd">pg_isready</span>','<span class="out">/var/run/postgresql:5432 - accepting connections</span>','<span class="prompt">root@bee-doo-replica:~$</span> <span class="cmd">SELECT count(*) FROM pg_stat_subscription;</span>','<span class="out"> count: 1 (beedoo_supabase_sub: streaming)</span>','<span class="prompt">root@bee-doo-replica:~$</span> <span class="cmd">df -h /</span>','<span class="out">Filesystem  Size  Used Avail Use%</span>','<span class="out">/dev/sda1    75G  4.8G   67G   7%</span>','<span class="prompt">root@bee-doo-replica:~$</span> <span class="cmd">free -m</span>','<span class="out">       total  used  free  shared  buff/cache  available</span>','<span class="out">Mem:    3814   475  2841      12         498       3100</span>','<span class="prompt">root@bee-doo-replica:~$</span> <span class="cmd">SELECT schemaname, count(*) FROM pg_tables GROUP BY 1;</span>','<span class="out"> public  | 72</span>','<span class="prompt">root@bee-doo-replica:~$</span> <span class="cmd">tail -1 /var/log/postgresql/postgresql-16-main.log</span>','<span class="out">2026-02-27 20:35:00 CET [12847] LOG: logical replication apply worker started</span>','<span class="prompt">root@bee-doo-replica:~$</span> <span class="cmd">uptime</span>','<span class="out"> 20:35:36 up 2 days, 4:12, 1 user, load average: 0.47, 0.38, 0.31</span>','<span class="prompt">root@bee-doo-replica:~$</span> <span class="cmd">certbot certificates</span>','<span class="out">Certificate Name: replica.bee-doo.de</span>','<span class="out">  Expiry: 2026-05-28 (VALID: 89 days)</span>','<span class="prompt">root@bee-doo-replica:~$</span> <span class="cmd">iptables -L INPUT --line-numbers | head -8</span>','<span class="out">1  ACCEPT  tcp  --  anywhere  anywhere  tcp dpt:ssh</span>','<span class="out">2  ACCEPT  tcp  --  anywhere  anywhere  tcp dpt:postgresql</span>','<span class="out">3  ACCEPT  tcp  --  anywhere  anywhere  tcp dpt:https</span>','<span class="out">4  DROP    all  --  anywhere  anywhere</span>','<span class="prompt">root@bee-doo-replica:~$</span> <span class="cmd">SELECT pg_size_pretty(pg_database_size(current_database()));</span>','<span class="out"> 2.4 GB</span>','<span class="prompt">root@bee-doo-replica:~$</span> <span class="cmd">SELECT count(*) FROM leveto_leads;</span>','<span class="out"> 23000</span>'];
let termIdx=0;const termEl=document.getElementById('terminal');
function typeTermLine(){if(termIdx<termLines.length){termEl.innerHTML+=`<div class="term-line active">${termLines[termIdx]}</div>`;termIdx++;termEl.scrollTop=termEl.scrollHeight;const delay=termLines[termIdx-1].includes('prompt')?800+Math.random()*1200:80+Math.random()*200;setTimeout(typeTermLine,delay)}else{setTimeout(()=>{termIdx=0;termEl.innerHTML='';typeTermLine()},5000)}}
setTimeout(typeTermLine,1500);

// ‚îÄ‚îÄ THROUGHPUT SPARKLINE ‚îÄ‚îÄ
let tpData=Array.from({length:40},()=>Math.random()*1.5+0.8);
function drawTPSpark(){const cv=document.getElementById('tp-spark');const dpr=Math.min(window.devicePixelRatio||1,2),rect=cv.getBoundingClientRect();if(!rect.width)return;cv.width=rect.width*dpr;cv.height=rect.height*dpr;const ctx=cv.getContext('2d');ctx.scale(dpr,dpr);const W=rect.width,H=rect.height;const tx=i=>(i/(tpData.length-1))*W,ty=v=>H-(v/3)*H;const g=ctx.createLinearGradient(0,0,0,H);g.addColorStop(0,'rgba(0,204,255,.2)');g.addColorStop(1,'rgba(0,204,255,0)');ctx.beginPath();tpData.forEach((v,i)=>i?ctx.lineTo(tx(i),ty(v)):ctx.moveTo(tx(i),ty(v)));ctx.lineTo(W,H);ctx.lineTo(0,H);ctx.closePath();ctx.fillStyle=g;ctx.fill();ctx.beginPath();tpData.forEach((v,i)=>i?ctx.lineTo(tx(i),ty(v)):ctx.moveTo(tx(i),ty(v)));ctx.strokeStyle='#00ccff';ctx.lineWidth=2;ctx.shadowColor='#00ccff';ctx.shadowBlur=8;ctx.stroke()}

// ‚îÄ‚îÄ HEATMAP (90 days) ‚îÄ‚îÄ
function buildHeatmap(){const el=document.getElementById('heatmap');let html='';for(let w=0;w<13;w++){html+='<div class="hm-col">';for(let d=0;d<7;d++){const val=Math.random();const isDown=Math.random()<.02;const color=isDown?'rgba(255,51,85,.5)':val>.8?'rgba(0,255,136,.9)':val>.6?'rgba(0,255,136,.6)':val>.3?'rgba(0,255,136,.35)':'rgba(0,255,136,.1)';const date=new Date();date.setDate(date.getDate()-(12-w)*7-d);const title=date.toLocaleDateString('de-DE')+': '+(isDown?'Incident':'99.'+(Math.floor(Math.random()*9)+1)+'% uptime');html+=`<div class="hm-cell" style="background:${color}" title="${title}"></div>`}html+='</div>'}el.innerHTML=html}

// ‚îÄ‚îÄ DEPLOYMENTS ‚îÄ‚îÄ
function buildDeploys(){const msgs=[{msg:'feat: epic server dashboard v2',branch:'main',ago:'vor 12 min',ok:true},{msg:'fix: anthropic API headers',branch:'main',ago:'vor 28 min',ok:true},{msg:'feat: hetzner replica monitoring',branch:'main',ago:'vor 1 Std',ok:true},{msg:'fix: commission PDF page breaks',branch:'main',ago:'vor 3 Std',ok:true},{msg:'feat: SEPA pain.001 export',branch:'main',ago:'vor 5 Std',ok:true}];document.getElementById('deploy-list').innerHTML=msgs.map(d=>`<div class="deploy-item"><div class="deploy-dot" style="background:${d.ok?'var(--green)':'var(--red)'}"></div><div class="deploy-info"><div class="deploy-msg">${d.msg}</div><div class="deploy-meta">${d.branch}</div></div><div class="deploy-time">${d.ago}</div></div>`).join('')}

// ‚îÄ‚îÄ TICKER ‚îÄ‚îÄ
function setupTicker(){const items=['‚ö° bee-doo Tools ¬∑ Vercel ONLINE','üõ∞Ô∏è Scouting ¬∑ 12 aktive Scouts','üóÑÔ∏è Supabase ¬∑ Primary DB ¬∑ Pro','üõ°Ô∏è Hetzner ¬∑ N√ºrnberg ¬∑ Replica','üß† Anthropic ¬∑ Claude Sonnet','üåç Google Maps ¬∑ Geocoding OK','üêô GitHub ¬∑ bee-doo-tools','üìä 72 Tabellen repliziert','‚öôÔ∏è Alle Systeme nominal','üîí SSL ¬∑ Let\'s Encrypt','üõ°Ô∏è 2.847 Angriffe blockiert','üíæ 23.000 Leads repliziert'];document.getElementById('ticker').textContent=[...items,...items].map(e=>`${e}   ¬∑   `).join('')}

// ‚îÄ‚îÄ SIM ‚îÄ‚îÄ
function simUpdate(){dbs.forEach(d=>{d.u=Math.max(5,Math.min(95,d.u+(Math.random()*3-1.5)))});renderDBs();document.getElementById('kpi-q').textContent=Math.floor(330+Math.random()*40);tpData.shift();tpData.push(Math.random()*1.5+0.8);drawTPSpark();document.getElementById('tp-val').innerHTML=(tpData[tpData.length-1]).toFixed(1)+'<span class="tp-unit">GB/s</span>'}

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
buildApiCol();renderDBs();drawLatencyChart();drawTPSpark();setupTicker();drawTopology();buildHeatmap();buildDeploys();
APIS.forEach((a,i)=>setTimeout(()=>ping(a),i*500+300));
setInterval(()=>APIS.forEach((a,i)=>setTimeout(()=>ping(a),i*400)),60000);
setInterval(simUpdate,2000);window.addEventListener('resize',()=>{drawLatencyChart();drawTPSpark()});
setTimeout(checkReplication,2000);setInterval(checkReplication,30000);
</script>
</body>
</html>
